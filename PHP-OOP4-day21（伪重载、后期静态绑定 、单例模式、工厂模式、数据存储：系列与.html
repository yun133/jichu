<html>
<head>
  <title>PHP-OOP4-day21（伪重载、后期静态绑定 、单例模式、工厂模式、数据存储：系列与反系列）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1779"/>
<h1>PHP-OOP4-day21（伪重载、后期静态绑定 、单例模式、工厂模式、数据存储：系列与反系列）</h1>

<div>
<span><div><span style="font-size: 21px;"><b>PHP-OOP4-day21</b><span style="font-size: 16px;"><b>（</b>伪重载、</span></span><span style="font-size: 16px;"><font color="#010101" face="宋体">后期静态绑定</font> 、单例模式、工厂模式、数据存储：系列与反系列<b>）</b></span></div><div align="justify" style="font-weight: bold;"><span style="font-size: 19px;"><font color="#010101" face="Arial"><b>一、PHP</b></font><font color="#010101" face="黑体"><b>中重载（伪重载）</b></font></span></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;">为一个不存在的属性赋值的时候，PHP触发不同的方法，于是支持将该属性重新载入到当前的对象的内部，这种现象就叫作属性重载！</div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是可以采取相应的操作来处理对不可访问的成员的操作的控制！（以上是系统的默认行为）</span></font></div><div align="left" style="min-height: 18pt;"><div style="margin-left:40px;"><span style="font-size: 16px;"><font color="#010101">PHP不支持重载，但是可以利用其它方式实现<span style="color: rgb(255, 0, 0);">类似</span>重载的功能。</font></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    class Student{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public $stu_id;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public $stu_name;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu=new Student;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu-&gt;stu_id=9527;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu-&gt;stu_name='华安';</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    <b>$stu-&gt;stu_age=25;//本来没有age值，php自动以类似重载方法插入该公共属性和值</b></span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump($stu);</span></span></span></div><div>object(Student)#1 (3) { [&quot;stu_id&quot;]=&gt; int(9527) [&quot;stu_name&quot;]=&gt; string(6) &quot;华安&quot; [&quot;stu_age&quot;]=&gt; int(25) }</div></div></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">所以，根据所处理的成员不同，重载又分成两种情况：</span></font></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>1、属性重载</b></span></font></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">根据对不可访问的属性的操作方式不同，系统分别由不同的魔术方法来处理：</span></font></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">一共有四个魔术方法：主要作用是让用户取得处理控制权</span></font></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>1为不可访问的属性赋值：</b></span></font> <font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">__set()</span></font></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><span style="color: rgb(1, 1, 1);">该魔术方法需要两个参数</span>：</span></font><font face="宋体" size="2"><span style="font-size:10pt">该不可访问的属性的<span style="color: rgb(255, 0, 0);">属性名和</span></span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">属性的值</span></font></div><div style="margin-left:40px;"><div align="left" style="min-height: 13pt;"><div><font color="#010101" face="����">一旦定义了__set()魔术方法，为不可访问的属性赋值的时候，就会自动的执行该方法，此时，处理权就交给用户自己了！</font></div></div></div></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>2获得不可访问的属性的值：</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">  __get()</span></font></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">一旦定义了</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">__get()</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">魔术方法，</span><span style="font-size:10pt; background:#ffff00">获取不可访问的属性的值的时候，</span><span style="font-size:10pt">就会自动的执行该方法，此时，处理权就交给用户自己了！</span></font></div></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">该魔术方法，只需要一个参数，就是该属性的<span style="color: rgb(255, 0, 0);">属性名！</span></span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>注意：</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">__get</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">和</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">__set</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">两个方法往往在真实的项目中都是成对出现的！而且，往往就是利用这两个方法批量的对对象的私有属性进行处理！</span></font></div></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>3删除不可访问的属性：</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">  __unset()</span></font></div><div align="justify" style="min-height: 14pt;margin-left:40px;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">但是，如果该属性是不可访问的（比如</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">private</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">或不存在），则会自动执行</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">__unset</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">方法，究竟是否可以删除成功，还是取决于</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">__unset</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的内部实现！</span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">该方法也只需要一个参数，就是当前删除的<span style="color: rgb(255, 0, 0);">属性名</span>！</span></font></div></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>4判断不可访问的属性是否存在：</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">  __isset()</span></font></div></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">如果该属性是不可访问的属性，判断这个属性是否存在的时候，会自动触发该方法的执行！</span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">同样的，该方法也需要一个参数，技术当前需要判断的<span style="color: rgb(255, 0, 0);">属性名</span>！</span></font></div><div align="justify" style="min-height: 12pt;"><div>2、<font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>方法重载：</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">指访问不可访问的方法的时候的处理方式！</span></font></div><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">方法重载是通过两位的两个魔术方法来完成的：</span></font></div></div><div style="margin-left:40px;"><b><font color="#010101" face="Arial" size="4"><span style="font-size:16pt"><b>__call()</b></span></font></b></div><div style="margin-left:40px;"><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">当调用一个不可访问的对象方法（非静态方法），会自动的执行该魔术方法！</span></font></div></div></div><div align="justify" style="min-height: 14pt;margin-left:40px;"><div><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>参数一：</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">方法名，</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">string</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">型，</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>参数二：</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">array</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">型，因为参数的个数不确定，只能把所有的参数都放到一个数组里面</span></font></div></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">假如这个方法什么都不做：</span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">当调用一个不可访问的类方法（静态方法）的时候，会自动执行该魔术方法，定义这个方法的时候，需要在方法名</span></font></div><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的前面加上</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">static</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">关键字，因为该方法应该是一个静态方法！</span></font></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    class Student{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        private $stu_id;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        private $stu_name;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        private $stu_age;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        private $stu_money;       </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public function __set($name,$value){//增加__set方法</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            $allow_set=array('stu_id','stu_money','stu_name','stu_age');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            if (in_array($name, $allow_set)) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                $this-&gt;$name=$value;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public function __get($name){//增加__get方法</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            $allow_get=array('stu_id','stu_name');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            if (in_array($name, $allow_get)) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                return $this-&gt;$name;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }else{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                return false;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }   </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public function __unset($name){//增加__unset方法</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            $allow_unset=array('stu_age','stu_money');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            if (in_array($name, $allow_unset)) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                unset($this-&gt;$name);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }else{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                return false;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }           </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public function __isset($name){//增加__isset方法</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            $allow_isset=array('stu_id','stu_money','stu_name','stu_age');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            if (in_array($name, $allow_isset)) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                return true;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }else{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                return false;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }           </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public function __call($name,$arr){//当调用一个不可访问的非静态方法时，自动执行</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            // var_dump($arr);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            echo &quot;对不起，您调用的非静态方法不存在&lt;br/&gt;&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public</span> <span style="color: rgb(255, 0, 0);"><b>static</b></span> <span style="color: rgb(51, 51, 51);">function __callstatic($name,$arr){//当调用一个不可访问的静态方法时，自动执行</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            // var_dump($arr);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            echo &quot;对不起，您调用的静态方法不存在&lt;br/&gt;&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }       </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu=new Student;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu-&gt;stu_id=9527;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu-&gt;stu_name='华安';</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu-&gt;stu_age=25;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu_teacher=&quot;大虎&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    echo &quot;&lt;pre&gt;&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump($stu);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    // echo $stu-&gt;stu_age;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    unset($stu-&gt;stu_age);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump($stu);//stu_age属性和值被删除</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump(isset($stu-&gt;stu_name));//bool(true)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $stu-&gt;showName(10,20);//对不起，您调用的非静态方法不存在</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    Student::showName();//对不起，您调用的静态方法不存在</span></span></span></div></div></div><div align="justify" style="font-size: 20px;"><b><font color="#010101" face="黑体" size="4"><span style="font-size:16pt"><b>一个小案例（伪重载）：</b></span></font></b><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">设计一个数学类</span></font></div></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    class Math{      //<b>PHP不支持重载，但是可以利用其它方式实现类似重载的功能。</b></span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public function __call($name,$arr){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            if ($name=='f1') {//判断用户调用的方法是否为f1</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                $length=count($arr);//根据参数的额个数进行业务逻辑处理</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                if ($length&lt;1||$length&gt;3) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                    echo &quot;非法的参数个数&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                }elseif ($length==1) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                    return $arr[0]*$arr[0];</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                }elseif ($length==2) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                    return $arr[0]*$arr[0]+$arr[1]*$arr[1];</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                }elseif ($length==3) {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                    return $arr[0]*$arr[0]*$arr[0]+$arr[1]*$arr[1]*$arr[1]+$arr[2]*$arr[2]*$arr[2];</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $obj=new Math;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    echo $obj-&gt;f1(10); //100</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    echo &quot;&lt;br/&gt;&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    echo $obj-&gt;f1(10,20); //500</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    echo &quot;&lt;br/&gt;&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    echo $obj-&gt;f1(10,20,30);//36000</span></span></span></div></div><div align="justify" style="min-height: 14pt;"><div><span style="font-size: 19px;"><b><font color="#010101" face="Calibri">二、MySQLDB</font><font color="#010101" face="宋体">类的重载</font></b></span></div></div><div align="justify" style="margin-left:40px;"><span style="font-size: 16px;"><b><font color="#010101" face="黑体"><b>完善属性重载：</b></font></b></span>完善__set()，完善__get()，完善__unset()，完善__isset()</div><div align="justify" style="margin-left:40px;"><span style="font-size: 16px;"><b><font color="#010101" face="黑体"><b>完善方法重载：</b></font></b></span><font color="#010101" face="Calibri">MySQLDB</font><font color="#010101" face="宋体">类的单例模式</font></div><div align="justify"><div align="justify" style="min-height: 14pt;"><div align="justify" style="margin-left:40px;"><span style="font-size: 16px;"><b><font color="#010101" face="黑体"><b>第一步：增加一个私有的静态属性，用于保存对象</b></font></b></span></div><div align="justify" style="margin-left:40px;"><span style="font-size: 16px;"><b><font color="#010101" face="黑体"><b>第二步：把构造方法私有化</b></font></b></span></div><div align="justify" style="margin-left:40px;"><span style="font-size: 16px;"><b><font color="#010101" face="黑体"><b>第三步：增加一个获得单例的公共方法</b></font></b></span></div><div align="justify" style="font-weight: bold; margin-left: 40px;"><span style="font-size: 16px;"><font color="#010101" face="黑体"><b>第四步：私有化克隆魔术方法</b></font></span></div></div></div><div align="justify" style="min-height: 13pt;"><div><span style="font-size: 19px;"><b><font color="#010101" face="宋体">三、后期静态绑定</font></b></span></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">1</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">、</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">$this</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是不是永远代表其代码所在类直接实例化出来的对象？</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">不是，</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">$this</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">是要根据上下文的执行环境来决定的！</span></font></div></div></div><div align="justify" style="min-height: 14pt;margin-left:40px;"><div><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">2、</span></font><b><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">self</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是不是永远代表<span style="color: rgb(255, 0, 0);">其</span>代码<span style="color: rgb(255, 0, 0);">所在</span>类的类名？</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">回答：是</span></font></b></div></div><div><div align="justify" style="min-height: 14pt;margin-left:40px;"><div><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>总结一下</b></span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>static</b></span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>的功能，一共有三个了：</b></span></font></div></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="display:inline;list-style:none;"><ol><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">定义静态局部变量（和变量的生命周期相关）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">定义静态成员（静态方法和静态属性）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">代表“当前类”</span></font></div></li></ol></li></ol></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#00ff00">总结，目前代表类的关键字一共有几个了？</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">一共有三个：</span></font></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>self</b></span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>：</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">当前类（在预编译阶段绑定），在哪就是哪的类。</span></font></div></div><div align="justify" style="min-height: 14pt;margin-left:40px;"><div><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>static</b></span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>：</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">当前类（后期静态绑定），谁用就是谁的类。</span></font></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>parent</b></span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>：</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">代表父类</span></font></div></div><div align="justify" style="min-height: 13pt;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">什么是设计模式？</span></font></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">所谓的设计模式，并不是一种新的语法，而是人们在实际的应用中面对某种特定的情形而设计出来的某种常见的有效的解决方案，只是经验的总结！</span></font></div></div><div><span style="font-size: 19px;"><b><font color="#010101" face="宋体">四、单例模式</font></b></span></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">通过某些技巧从语法上使得一个类只能开辟一个对象空间的话，就可以节省相应的对象资源，这种模式就叫作单例模式！</span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">四步走、实现单例模式的最典型的做法：</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">也叫作“三私一公”！</span></font></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    class MySQLDB{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        //3增加一个私有属性，用于保存第一次实例出来的对象</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        private static $instance;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        //1私有化构造方法，阻止无限地new实例出来</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        private function __construct(){           </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        //2增加</span><span style="color: rgb(255, 0, 0);">静态</span><span style="color: rgb(51, 51, 51);">公开方法，去生产实例</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public</span> <span style="color: rgb(255, 0, 0);">static</span> <span style="color: rgb(51, 51, 51);">function getInstance(){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            if(!self::$instance instanceof self){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                self::$instance=new self;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            return self::$instance;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        //4私有化__clone方法</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        private function __clone(){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    // $obj=new MySQLDB;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    // var_dump($obj);//</span></span></span> <b style="color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Fatal error</b><span style="color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">: Call to private MySQLDB::__construct() from invalid context in</span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $db1=MySQLDB::getInstance();</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump($db1);//</span></span></span> <span style="color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">object(MySQLDB)#1 (0) { }</span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $db2=MySQLDB::getInstance();</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump($db2);//</span></span></span> <span style="color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">object(MySQLDB)#1 (0) { }</span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    // $db3=clone $db2;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    // var_dump($db3);//</span></span></span> <b style="color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Fatal error</b><span style="color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">: Call to private MySQLDB::__clone() from context </span></div></div></div><div align="justify" style="min-height: 13pt;"><div><span style="font-size: 19px;"><b><font color="#010101" face="宋体">五、工厂模式</font></b></span></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">工厂模式的含义就是：设计一个类（此时这个类可以叫作“工厂类”），该类的作用就是帮助其他的类“生产”对象，</span></font></div><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">也就是说，只要传递给这个“工厂”一个类名，就可以得到一个相应的对象！</span></font></div></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">  //利用工厂模式生产对象 </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    class A{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    class B{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    class Factory{</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        public static function getInstance($class_name){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            return new $class_name;//可变对象</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    echo &quot;&lt;pre&gt;&quot;;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    //利用工厂得到对象</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $aaa=Factory::getInstance('A');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump($aaa);//object(A)#1 (0) {}</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $bbb=Factory::getInstance('B');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    var_dump($bbb);//object(B)#2 (0) {}</span></span></span></div></div><div align="justify" style="font-weight: bold;"><div><span style="font-size: 19px;"><font color="#010101" face="黑体"><b>利用工厂方法，生产单例对象</b></font></span></div></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">但是这里的单例，实现的方式并不是“三私一公”</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">!</span></font></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    class DanFactory{</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">        private static $instance=array();</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">        public static function getInstance($class_name){</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">            if (file_exists('./'.$class_name.'.class.php')) {</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">                include_once './'.$class_name.'.class.php';</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">                if (!isset(self::$instance[$class_name])|| !self::$instance[$class_name] instanceof $class_name) {</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">                    self::$instance[$class_name]=new $class_name;</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">                }</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">                return self::$instance[$class_name];</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">            }else{</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">                die(&quot;系统错误，没有找到相关的类！&quot;);</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">            }           </span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">        }</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    echo &quot;&lt;pre&gt;&quot;;</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    //利用工厂得到对象</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    $aaa=DanFactory::getInstance('A');</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    var_dump($aaa);//object(A)#1 (0) {}</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    $bbb=DanFactory::getInstance('B');</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    var_dump($bbb);//object(B)#2 (0) {}</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    $ccc=DanFactory::getInstance('A');</span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    var_dump($ccc);//object(A)#1 (0) {}</span></span></span></div></div></div><div><br/></div><div align="justify" style="font-weight: bold; font-size: 20px;"><font color="#010101" face="黑体" size="4"><span style="font-size:16pt"><b>六、1、数据的存储</b></span></font></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">也就是数据被持久化！一般的，可以将数据存放到数据库或者文件磁盘介质中！</span></font></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">当</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">脚本运行结束的时候，内存中的数据都会丢失，脚本的资源也都会消失（包括脚本中的数据），所以，如果想</span></font></div><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">实现数据存储，就应该在脚本运行结束之前进行数据的持久化！</span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">在将数据自动转换成字符串的时候，同时在字符串内记录原数组的值和类型等相关的信息，目的就是在</span></font></div><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">得到数据的时候，能根据存储的信息（包含数据类型）转换成原始数据！</span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">这个工作就是由数据的序列化与反序列化来完成的！</span></font></div></div><div align="justify" style="font-weight: bold; font-size: 20px;margin-left:40px;"><div><font color="#010101" face="黑体" size="4"><span style="font-size:16pt"><b>2、数据的序列化与反序列化</b></span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>数据的序列化：</b></span></font></div></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">将原始数据转换成可以用于保存和传输的字符串数据！（不仅仅记录原数组的值，还记录原数据的类型等相关信息）</span></font></div></div><div align="justify" style="min-height: 12pt;margin-left:40px;"><div align="justify" style="min-height: 14pt;"><div><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>serialize():</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">序列化---</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">在数据存放到文件之前先进行序列化：</span></font></div></div></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>数据的反序列化：</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">将序列化后的字符串数据，转换成原始数据！</span></font></div></div><div style="margin-left:40px;"><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>unserialize():</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">反序列化---</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">在读取数据之前进行反序列化：</span></font></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>注意：</b></span></font></div></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">数据的序列化与反序列化适用于除了资源类型之外的任何的数据类型！包括对象和字符串本身！</span></font></div></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font face="宋体" size="2"><span style="font-size:10pt"><b>1在将对象存储到文件之前进行序列化操作，</b></span></font><font face="宋体" size="2"><span style="font-size:10pt"><b>在输出对象之前进行反序列化时对象数据有问题？</b></span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">反序列化的时候，也需要先找到对象所属的类，如果找不到，则对象会被反序列化成一个名字叫作</span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>__PHP_Incomplete_Class</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的类！这是一个系统预定义的类！</span></font></div><div align="justify" style="min-height: 13pt;margin-left:40px;"><div><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>解决方案：</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">只需要在反序列化的时候找到这个对象所属的类就行了：</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">手动载入！或</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">自动载入！</span></font></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">2序列化的时候，资源型的属性</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">$link</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">被转换成了整型数据</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">0</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">！</span></font><div align="left" style="min-height: 10pt;"><div><font color="#010101" face="����" size="1"><span style="font-size:9pt">解决方法：在序列化的时候不存储资源型数据，在反序列化的时候再打开相应的资源！</span></font></div></div></div></div><div><b><font color="#010101" face="Arial" size="4"><span style="font-size:16pt"><b>       __sleep()</b></span></font></b></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是在序列化一个对象的时候自动调用！</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">该方法用于规定哪些属性应该被序列化，实现的方式为：</span></font></div></div><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>返回一个索引数组，数组内的元素为需要被序列化的属性名的集合！</b></span></font></div></div><div align="justify" style="font-size: 20px;margin-left:40px;"><div><font color="#010101" face="Arial" size="4"><span style="font-size:16pt"><b>__wakeup()</b><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是在一个对象反序列化的时候自动调用的！</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">主要用来对对象进行相关的初始化操作！</span></font></span></font></div></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>    //在MySQLDB类中增加魔术方法__sleep()和__wakeup()</div><div>    public function __sleep(){</div><div>        return array('host','port','user','pass','charset','dbname');</div><div>    }</div><div>    public function __wakeup(){//初始化数据库三部曲</div><div>        $this-&gt;my_connect();//连接数据库</div><div>        $this-&gt;my_charset();//选择默认字符集</div><div>        $this-&gt;my_dbname();//选择默认的数据库</div><div>    }</div></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>    function __autoload($class_name){//系列化</div><div>        if (file_exists('./'.$class_name.'.class.php')) {</div><div>            include_once './'.$class_name.'.class.php';</div><div>        }else{</div><div>            die(&quot;系统错误，没有找到相关的类！&quot;);</div><div>        }</div><div>    }</div><div>    $arr=array(</div><div>        'pass'=&gt;'123456',</div><div>        'dbname'=&gt;'whereit'</div><div>        );</div><div>    $data=MySQLDB::getInstance($arr);</div><div>    echo &quot;&lt;pre&gt;&quot;;</div><div>    var_dump($data);</div><div>    $s_data=serialize($data);//写入文件之前先将数据进行序列化</div><div>    echo file_put_contents('./38.txt',$s_data);//返回值是写入的字符串的长度</div></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    function __autoload($class_name){//在反序列化的时候找到这对象所属的类就行：手动载入！自动载入！</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">        if (file_exists('./'.$class_name.'.class.php')) {</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">            include_once './'.$class_name.'.class.php';</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">        }else{</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">            die(&quot;系统错误，没有找到相关的类！&quot;);</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">        }</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    }</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    $data=file_get_contents('./38.txt');</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    $u_data=unserialize($data);//在读数据之前进行反序列化</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    echo &quot;&lt;pre&gt;&quot;;</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    var_dump($u_data);</span></span></div></div></div></div></span>
</div></body></html> 