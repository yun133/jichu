<html>
<head>
  <title>linux之 LAMP编程</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2203"/>
<h1>linux之 LAMP编程</h1>

<div>
<span><div><span style="font-size: 21px;">linux之 LAMP编程</span></div><div><span style="font-size: 19px;">一、ssh协议</span><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">22</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">端口号就是</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ssh</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">协议使用的端口号</span></font></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">二、光盘挂载</span></span></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">挂载：就是指系统给外接设备（包括但不限于U盘，光盘）分配盘符的这么一个过程。</span></span></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">lsblk（list block devices）</span></span></div><div>1查看【lsblk】找到iso-dvd1光驱设备（或其他）,     2然后创建一个dvd目录mkdir /mnt/dvd</div><div>3挂载【<b>mount  块状设备的位置  挂载的位置</b>】---例mount  /dev/sr0   /mnt/dvd,</div><div>4再lsblk检查挂载情况，MOUNTPOINT下有目录则成功</div><div>三、LAMP安装</div><div>1、准备工作---修改文件前先备份</div><div><b>1.1、关闭防火墙，必须，这样才能使用ssh，apache，mysql服务，远程</b></div><div>方法1#service 服务名 start/stop/restart 关闭防火墙服务</div><div>方法2rpm -e iptables-1.4.7-14.e16.i868 --nodeps 删除防火墙</div><div>方法3vim /etc/sysconfig/iptables，打开修改保存，复制并粘贴2句，将允许的端口设置为<b>22,80,3306</b></div><div>例：-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT设置22端口允许</div><div>1.2linux中的解压命令</div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>命令</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>1</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>：</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>gz</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>格式文件</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>                 #tar -zxvf</b></span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>压缩包路径</b></span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>命令</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>2</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>：</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>bz2</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>格式文件</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>              #tar -jxvf</b></span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>压缩包路径</b></span></font></div></div><div>2开始编译模式安装LAMP</div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">2.1安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">zlib</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">压缩库</span></font></div></div><div align="justify" style="min-height: 10pt;"><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>shell&gt;#cd /root/data</div><div>shell&gt;#tar -zxvf zlib-1.2.5.tar.gz</div><div>shell&gt;#cd zlib-1.2.5</div><div>shell&gt;#./configure          //对当前的程序安装进行配置，指定安装路径</div><div>shell&gt;#make &amp;&amp; make install     //编译&amp;&amp;安装</div></div><div>2.2安装apache，先卸载系统中默认安装的Apache，防止80端口被占用</div><div style="margin-left:40px;">2.2.1rpm -e `rpm -qa|grep httpd`</div></div><div style="margin-left:40px;"><div align="justify" style="min-height: 10pt;"><div>2.2.2开始安装配置过程，注意配置<font color="#010101" face="����" size="2"><span style="font-size:10pt">#./configure <b>--prefix=/usr/local/http2</b> --enable-modules=all --enable-mods-shared=all --sysconfdir=/etc/httpd --enable-so</span></font></div></div></div><div style="margin-left:40px;"><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>2.2.3修改</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>Apache</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>配置文件（</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>148</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>行左右），去掉</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>ServerName</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>前的</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>#</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>注释</b></span><span style="font-size:10pt">：</span></font></div></div></div><table cellpadding="6" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #010101;width:554px;" width="553"><tr><td align="left" bgcolor="#BFBFBF" style="border: solid #010101 1px;width:99.81949458483754%;" valign="top" width="540"><div align="justify" style="min-height: 10pt;margin-left:40px;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">shell&gt;#vim +148 /etc/httpd/httpd.conf</span></font></div></div></td></tr></table><div align="justify" style="min-height: 12pt;"><div style="margin-left:40px;"><div align="justify" style="min-height: 14pt;"><div>2.2.4<font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>Apache</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>启动</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>/</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>停止</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>/</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>重启命令：</b></span></font></div></div></div><table cellpadding="6" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #010101;width:554px;" width="553"><tbody><tr><td align="left" bgcolor="#BFBFBF" style="border: solid #010101 1px;width:99.81949458483754%;" valign="top" width="540"><div align="justify" style="min-height: 10pt;margin-left:40px;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">shell&gt;#/usr/local/http2/bin/apachectl start/stop/restart</span></font></div></div></td></tr></tbody></table><div align="justify" style="min-height: 12pt;"><div align="justify" style="min-height: 14pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">2.2.5测试访问，可以在</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">windows</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">主机的浏览器中输入</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">linux</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">服务器的</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ip</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">地址来访问</span></font></div></div></div></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">2.3安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">libxml2，2.4</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">jpeg8，2.5</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">libpng，2.6</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">freetype</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（字体库软件），2.7安装GD库（处理图片的扩展），2.8</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">php，2.9</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">cmake，2.10</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ncurses-devel，2.11</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">安装</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">mysql</span></font></div><div><span style="font-size: 21px;"><b>详见Linux-安装LAMP详解</b></span></div></div><div><br/></div><div><br/></div><div>apache安装路径<font color="#010101" face="����" size="2"><span style="font-size:10pt">/usr/local/http2，<b>配置文件</b></span></font><b><font color="#010101" face="����" size="2"><span style="font-size:10pt"> /etc/httpd/httpd.conf</span></font></b></div><div align="justify" style="min-height: 10pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">/usr/local/http2/bin/apachectl start/stop/restart</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">Apache</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的站点目录位于：</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">/usr/local/http2/htdocs</span></font></div></div></div><div>php安装路径<font color="#010101" face="����" size="2"><span style="font-size:10pt">--prefix=/usr/local/php</span></font></div><div align="justify" style="min-height: 10pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">#cd /root/data，</span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">#cp php.ini-development  <b>/usr/local/php/lib/php.ini配置文件</b></span></font></div></div><div align="justify" style="min-height: 10pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">#vim +355 /etc/httpd/httpd.conf</span></font></div></div><div align="justify" style="min-height: 10pt;"><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt"><b>重启apache：</b></span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">#/usr/local/http2/bin/apachectl restart</span></font></div></div></div><div>mysql安装路径：<font color="#010101" face="����" size="2"><span style="font-size:10pt">/usr/local/mysql</span></font></div><div>mysql默认数据存储位置<font color="#010101" face="����" size="2"><span style="font-size:10pt">/usr/local/mysql/data</span></font></div><div><b><span style="font-family: ����;"><span style="color: rgb(1, 1, 1);">mysql配置文件路径</span></span><font color="#010101" face="����" size="2"><span style="font-size:10pt">/etc/my.cnf</span></font></b></div><div align="justify" style="min-height: 10pt;"><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt"><b>后台开启运行mysql服务</b></span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">/usr/local/mysql/bin/mysqld_safe --user=mysql &amp;</span></font><div align="justify" style="min-height: 10pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">root用户登录数据库/usr/local/mysql/bin/mysql -u root</span></font></div></div></div></div></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt"><b>设置数据库密码：</b></span></font></div><div align="justify" style="min-height: 10pt;"><font color="#010101" face="����" size="2"><span style="font-size:10pt">mysql&gt;use mysql;</span></font></div><div align="justify" style="min-height: 10pt;"><font color="#010101" face="����" size="2"><span style="font-size:10pt">mysql&gt;UPDATE user SET Password=password('</span><span style="font-size:10pt; background:#ffff00">123456</span><span style="font-size:10pt">') WHERE user='root';</span></font></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">mysql&gt;flush privileges;         //刷新权限信息</span></font></div></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">开启允许远程连接：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">更新下</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">user</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">表中的</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">host</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">字段，更新成</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">%</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（表示允许在任何地方连接）：</span></font></div><div align="justify" style="min-height: 12pt;"><div><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">update user set host= '%' where user ='root' limit 1;</span></font></div><div><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">注意：在开启允许远程连接修改host字段为%前，需新建一xxx@hostlocal字段</span></span></div><div><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">-------------------------------------------------------------------------</span></span><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">-------------------------------------------------------------------------</span></span><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">-------------------------------------------------------------------------</span></span></div><div>use mysql;</div><div>insert into user(host, user, password) values(&quot;%&quot;, &quot;root&quot;, password(&quot;zhumysql&quot;));#创建一个远程连接账号</div><div>grant all privileges on *.* to 'root'@'%' with grant option; #赋予任何主机访问数据库权限</div><div>flush privileges;</div><div><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">-------------------------------------------------------------------------</span></span><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">-------------------------------------------------------------------------</span></span><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">-------------------------------------------------------------------------</span></span></div><div><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">相关函数：</span></span></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">查找软件rpm -qa | grep iptables</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">rpm -ql XXXX查看软件安装路径</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">ps -ef | grep xxx;查看软件服务和ID</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">启动/关闭/重启服务：service 服务名 start/stop/restart/status</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">查看系统外接设备lsblk（list block devices）</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">linux中的解压命令</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">命令1：gz格式文件        #tar -zxvf 压缩包路径</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">命令2：bz2格式文件        #tar -jxvf 压缩包路径</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">./configure          //对当前的程序安装进行配置</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">make &amp;&amp; make install     //编译&amp;&amp;安装</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">Apache启动/停止/重启命令：</span></span></b></div><div><b><span style="font-family: Calibri;"><span style="color: rgb(1, 1, 1);">shell&gt;#/usr/local/http2/bin/apachectl start/stop/restart</span></span></b></div><div><br/></div></div></span>
</div></body></html> 