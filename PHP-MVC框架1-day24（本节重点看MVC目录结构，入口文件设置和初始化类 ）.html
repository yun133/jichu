<html>
<head>
  <title>PHP-MVC框架1-day24（本节重点看MVC目录结构，入口文件设置和初始化类 ）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2051"/>
<h1>PHP-MVC框架1-day24（本节重点看MVC目录结构，入口文件设置和初始化类 ）</h1>

<div>
<span><div><span style="font-size: 21px;"><b>PHP-MVC框架1-day24（<span style="font-size: 16px;">本节重点看MVC目录结构，</span></b></span><span style="font-size: 16px;"><b>入口文件设置和初始化类</b></span> <span style="font-size: 21px;"><b>）</b></span></div><div align="justify"><span style="font-size: 19px;"><b><b><font color="#010101" face="Calibri">MVC</font><font color="#010101" face="宋体">自定义框架</font></b></b></span></div><div align="justify"><b><b><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">一、</span></font><font color="#010101" face="Cambria" size="4"><span style="font-size:16pt">MVC</span></font></b><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>概念</b></span></font></b></div><div align="justify"><span style="font-size: 15px;"><b><b><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt">1、MVC</span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">思想</span></font></b></b></span></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">MVC</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是一种软件</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">设计思想</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（基于</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">面向对象</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）：实现过程就是将<span style="color: rgb(255, 0, 0);"><b>业务逻辑，数据处理，界面显示</b></span>分离开，用<span style="color: rgb(255, 0, 0);"><b>入口文件index.php连接</b></span></span></font></div></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">业务逻辑：接受用户请求，判断用户逻辑</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">       C</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Controller</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，控制器，</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">脚本处理业务逻辑，组织模型和控制视图</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">数据（逻辑）：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">对数据的操作（读和写）</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">       M</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Model</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，模型，专门负责数据操作</span></font></div></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">界面显示：将数据放到</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">HTML中</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">显示</span></font></div></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">       V</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">view</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，视图，</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">HTML</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">文件用来显示数据</span></font></div><div><span style="font-size: 15px;"><b><b><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt">2、MVC</span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">图解</span></font></b></b></span></div><div><img src="PHP-MVC框架1-day24（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image.png" type="image/png" style="height:auto;" width="613"/></div><div align="justify" style="font-weight: bold;"><div><span style="font-size: 19px;"><b>3.  MVC</b><b>意义</b></span></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">代码发展史</span></font></div><div><img src="PHP-MVC框架1-day24（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [1].png" type="image/png" style="height: auto;"/></div></div><ol><li>混编阶段：PHP脚本直接嵌入到HTML中
<ol><li>优点：真正意义上的一个脚本完成一个请求，效率最高</li><li>缺点：比较混乱，特别不容易维护</li></ol></li><li>模板技术：将HTML和PHP脚本分离开来，然后PHP脚本需要显示数据的时候加载HTML文件。
<ol><li>优点：前后台分离，利于开发和维护</li><li>缺点：随着文件的增加，效率有所降低（PHP脚本已经分离，但是还是会存在难以维护和难以实现代码重用的现象）</li></ol></li><li>MVC思想：在模板技术的前提之上（PHP与HTML的分离），再次对PHP进行分层：业务逻辑和数据逻辑进行分离
<ol><li>优点：分离很彻底，非常利于维护；有利于代码重用（正因为如此，MVC收到热捧）</li><li>缺点：文件数增加，影响服务器的解析效率</li></ol></li></ol><div><div align="justify" style="min-height: 14pt;"><span style="font-size: 16px;"><b><font color="#010101">MVC</font><font color="#010101">优点：（重点背）</font></b></span></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>耦合性低</b>：代码与代码之间影响较小（代码重用性较高）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>重用性高</b>：实现更多代码的重复利用</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>部署快</b>：分工明确，提升开发效率</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>可维护性高</b>：分离比较明确，修改起来也很明确，易测试性</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>有利软件工程化管理</b>：分工明确，每个人负责内容很清晰</span></font></div></li></ol><div align="justify" style="min-height: 14pt;"><span style="font-size: 16px;"><b><font color="#010101">MVC</font><font color="#010101">缺点：</font></b></span></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 15pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;">没有明确的定义：</span></font><font color="#333333" size="2"><span style="font-size:10pt">MVC</span></font><font color="#333333" size="2"><span style="font-size:10pt">只是规定了方向（代码该放哪），但是没有规定具体要做什么</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>不适合小型，中等规模的应用程序</b>：开发初始难度增加</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;">增加系统结构和实现的复杂性：文件增加（文件包含增加）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 15pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;">视图与控制器间的过于紧密的连接：视图直接被控制器包含（数据在</span></font><font color="#333333" size="2"><span style="font-size:10pt">HTML</span></font><font color="#333333" size="2"><span style="font-size:10pt">中还是依赖</span></font><font color="#333333" size="2"><span style="font-size:10pt">PHP</span></font><font color="#333333" size="2"><span style="font-size:10pt">解析）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>视图对模型数据的低效率访问</b>：视图的数据来源于控制器，控制器才能从模型获取数据</span></font></div></li></ol><div align="justify" style="min-height: 14pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">MVC</span></font><font color="#010101" size="2"><span style="font-size:10pt">中优点针对的是开发者：降低开发成本；</span></font><font color="#010101" size="2"><span style="font-size:10pt">MVC</span></font><font color="#010101" size="2"><span style="font-size:10pt">中缺点对应的机器：<b>降低效率</b></span></font></div><div><h2 align="justify"><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>二、框架概念</b></span></font></h2></div><div><br/></div><div align="justify"><b><b><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt">1.  </span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">基本定义</span></font></b></b></div><div align="justify" style="min-height: 14pt;"><div>定义：框架（Framework<font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）是整个或部分系统的</span></font><font face="宋体" size="2"><span style="font-size: 10pt;"><font color="#FF0000">可重用设计</font><font color="#010101">。</font></span></font></div><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">从应用方面定义：</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">表现为一组抽象构件及构件实例间交互的方法</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">;</span></font></div><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">从目的方面定义：</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">框架是可被应用开发者定制的应用骨架。</span></font></div></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">应用方面框架：在框架中定义了很多的工具（</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">脚本），提供的是应用者可以直接调用对应的已经写好的代码去实现对应的功能：提供了很多可用的内容（脚本）</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">目的方面框架：框架将很多需要使用的底层的东西搭建好，然后开发者可以基于已经有的内容实现新的功能：提供了基础核心内容</span></font></div><div align="justify" style="min-height: 13pt;"><div><b><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">框架的本质：实现代码的重复利用（提高开发效率，增加代码的安全性）</span></font></b></div><div><h3 align="justify"><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt"><b>2.  </b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>项目单一入口</b></span></font></h3><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>单一入口</b>：单一入口通常是指一个项目或者应用具有</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">一个统一</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（但并</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">不一定是唯一</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）的入口文件</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>项目单一入口</b>：一个项目或者应用具有一个</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">统一而且唯一</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的入口文件。</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="宋体" size="2"><span style="font-size:10pt"><b>入口文件</b>：并不是一个脚本完成所有的功能，接入到庞大的</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">MVC</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">系统当中（通常用</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">index.php</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">）</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">该</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">MVC</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">中，有多个</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">M</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">、</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">V</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">和</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">C</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">       C</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">：一个控制器处理一类相关的业务</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">       M</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">：一个模型操作一类相关数据（往往针对一张表）</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">       V</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">：一个视图对应用户一个简单请求</span></font></div><div align="justify" style="min-height: 159pt;"><div><img src="PHP-MVC框架1-day24（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [2].png" type="image/png" alt="graphic" border="0" height="213" style="height: auto;" width="547"/></div><div><b><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>三、搭建</b></span></font><font color="#010101" face="Cambria" size="4"><span style="font-size:16pt">MVC</span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>自定义框架</b></span></font></b></div><div><ol><li><b>搭建框架目录</b><ol><li><b>掌握框架整体架构</b></li></ol></li></ol><ol><li>项目只有一个入口：index.php</li><li>文件夹分层：不同功能的脚本放到不同的文件夹
<ol><li><span style="color: rgb(255, 0, 0);">控制器</span>：专门存放处理业务的控制器类（MVC基于面向对象）</li><li><span style="color: rgb(255, 0, 0);">模型</span>：专门存放处理数据库的模型类</li><li><span style="color: rgb(255, 0, 0);">视图</span>：专门存放显示数据的HTML文件（前端提供）</li><li>插件：插件就是别人提供好的工具文件</li><li>公共文件：存放js，css和image文件</li><li><span style="color: rgb(255, 0, 0);">核心文件夹</span>：存放存放核心文件（存放一些公共代码）</li><li>配置文件：存放配置文件</li></ol></li></ol><div align="justify" style="min-height: 13pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">通常，一个框架的存在，势必有</span></font><font color="#FF0000" size="2"><span style="font-size:10pt">控制器、模型、视图和核心文件夹</span></font></div><div><span style="color: rgb(255, 0, 0);">--------------------------------------------------------------------------------------</span></div></div></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="display:inline;list-style:none;"><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 12pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><span style="font-size: 16px;"><b><font color="#010101">搭建框架目录结构</font></b></span></div></li></ol></li></ol><div align="justify" style="min-height: 13pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">两种目录结构方式：一个是扁平化，一个是分层</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">扁平化：不论前后台都属于同一层目录（</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ThinkPHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）</span></font></div><div align="justify" style="min-height: 234pt;"><div><img src="PHP-MVC框架1-day24（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [3].png" type="image/png" alt="graphic" border="0" height="313" style="height: auto;" width="552"/></div></div><div><img src="PHP-MVC框架1-day24（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [4].png" type="image/png" style="height: auto;"/>   其中index.php入口文件与其他5个文件在根目录下。<span style="color: rgb(255, 0, 0);">（目录是重点）</span></div><div><span style="font-size: 19px;"><font color="#010101" face="宋体"><span style="font-family: ����;"><b>2.</b></span></font><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>搭建项目虚拟主机</b></span></font></b></span></div><div><span style="font-family: ����;"><span style="color: rgb(1, 1, 1);">注意apache的httpd.conf要屏蔽# DirectoryIndex index.html index.php,否则虚拟主机只要出现index.php就会直接打开。</span></span></div><div><span style="font-size: 19px;"><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>3</b></span></font></b><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>.增加入口文件</b></span></font></b></span></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="display:inline;list-style:none;"><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 12pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">简述入口文件的工作</span></font></div></li></ol></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">入口文件本质要做的事情有很多：基本设定，数据接收判定，找到控制器等等</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">基于人类的思维逻辑：“大门”通常不做任何事情，只要能够通过即可，</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">index.php</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">也不要做什么事情；要做的就是让别人访问，“唯一”要做的事情就是引导工作，引导到一个正确的位置（安检）</span></font></div></div></div><div align="justify" style="min-height: 13pt;"><div><span style="font-size: 19px;"><font color="#010101" face="宋体"><span style="font-family: ����;"><b>4.</b></span></font><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>增加初始化类</b></span></font></b></span></div></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="display:inline;list-style:none;"><ol><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">初始化类：/Core/App.class.php</span></font></li></ol></li></ol></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><ol><li>控制项目采用正确的编码被浏览器解析</li><li>通过PHP的函数修改当前配置文件（临时修改）</li><li>项目开发中，会使用很多文件包含，相对路径包含不够安全，会采用绝对路径，通常会在初始化的时候将对应的需要包含文件的文件夹都设置成绝对路径常量</li><li>解析URL（获取数据）：没有数据，无法实现找到控制器</li><li>分发控制器：通过了解用户需求（平台，控制器，方法），进入到对应的控制器</li></ol><div>重点：一个单独的功能应该不与其他的功能重复（降低耦合性），单独功能在类中，应该对应一个单独的方法</div></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">ini_set()通过程序，控制PHP配置</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">ini_set(‘display_errors’,’1’);     更改配置文件，允许程序显示错误</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">ini_set(‘error_reporting’,’E_ALL’);     更改配置文件，让程序显示所有错误</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">定义和用法：error_reporting() 设置 PHP 的报错级别并返回当前级别。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">函数语法：error_reporting(report_level)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">如果参数 level 未指定，当前报错级别将被返回。下面几项是 level 可能的值：值 常量 描述</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">1 E_ERROR 致命的运行错误。错误无法恢复，暂停执行脚本。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">2 E_WARNING 运行时警告(非致命性错误)。非致命的运行错误，脚本执行不会停止。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">4 E_PARSE 编译时解析错误。解析错误只由分析器产生。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">8 E_NOTICE 运行时提醒(这些经常是你代码中的bug引起的，也可能是有意的行为造成的。)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">16 E_CORE_ERROR PHP启动时初始化过程中的致命错误。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">32 E_CORE_WARNING PHP启动时初始化过程中的警告(非致命性错)。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">64 E_COMPILE_ERROR 编译时致命性错。这就像由Zend脚本引擎生成了一个E_ERROR。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">128 E_COMPILE_WARNING 编译时警告(非致命性错)。这就像由Zend脚本引擎生成了一个E_WARNING警告。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">256 E_USER_ERROR 用户自定义的错误消息。这就像由使用PHP函数trigger_error（程序员设置E_ERROR）</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">512 E_USER_WARNING 用户自定义的警告消息。这就像由使用PHP函数trigger_error（程序员设定的一个E_WARNING警告）</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">1024 E_USER_NOTICE 用户自定义的提醒消息。这就像一个由使用PHP函数trigger_error（程序员一个E_NOTICE集）</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">2048 E_STRICT 编码标准化警告。允许PHP建议如何修改代码以确保最佳的互操作性向前兼容性。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">4096 E_RECOVERABLE_ERROR 开捕致命错误。这就像一个E_ERROR，但可以通过用户定义的处理捕获（又见set_error_handler（））</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">8191 E_ALL 所有的错误和警告(不包括 E_STRICT) (E_STRICT will be part of E_ALL as of PHP 6.0)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">例子：</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">任意数目的以上选项都可以用“或”来连接(用 OR 或 |)，这样可以报告所有需要的各级别错误。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">例如，下面的代码关闭了用户自定义的错误和警告，执行了某些操作，然后恢复到原始的报错级别：</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">&lt;?php</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">//禁用错误报告</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">error_reporting(0);</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">//报告运行时错误</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">error_reporting(E_ERROR | E_WARNING | E_PARSE);</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">//报告所有错误</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">error_reporting(E_ALL);</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">?&gt;</span></span></span></div></div></div></div><div align="justify" style="min-height: 13pt;"><div><hr/></div><div><b>-------------------------------<span style="font-size: 21px;">MVC入口文件设置和初始化类</span>-------------------------------------</b></div><div><span style="color: rgb(255, 0, 0);"><b>一、项目入口</b></span></div><div><span style="color: rgb(0, 0, 0); font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/index.php入口文件</b></span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><b>    //项目入口</b></div><div><b>    //定义项目入口常量（安全）</b></div><div><b>    define('ACCESS', TRUE);</b></div><div><b>    //项目入口不需做事情，引导到入口安检处：Core/App.class.php</b></div><div><b>    // echo &quot;项目入口&quot;;</b></div><div><b>    include_once 'Core/App.class.php';//引入核心文件</b></div><div><b>    //运行起来</b></div><div><b>    App::run();//为了效率尽量静态化（类直接访问，无需产生对象）App::run()</b></div></div><div align="justify" style="min-height: 13pt;"><div><b>初始化类五大步骤：</b></div><div><b>1、增加编码设定方法</b></div></div><div align="justify" style="min-height: 13pt;"><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>2、增加路径常量设定方法：将凡是需要包含文件的文件夹都设置一遍常量</b></span></font></b></div><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>3、增加系统错误设定方法：通过PHP提供的一个系统函数ini_set(配置项，值)</b></span></font></b></div><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>4、增加URL解析方法：判断用户要干嘛</b></span></font></b></div><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>5、增加分发方法：根据用户的需求找到对应的控制器（平台）以及方法</b></span></font></b></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><b>其中增加URL解析方法：判断用户要干嘛</b></div><div><b>关于用户请求有三个参数：p，c和a</b></div><div><b>P：platform，平台，前台还是后台</b></div><div><b>C：Controller，控制器</b></div><div><b>A：Action，动作，具体请求控制器的什么功能</b></div></div><div><b><span style="color: rgb(1, 1, 1);">二、初始化类</span></b></div></div><div><span style="color: rgb(0, 0, 0); font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/Core/App.class.php</b></span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><b>&lt;?php</b></div><div><b>    //项目初始化类（一判断，5初始类，一入口方法）</b></div><div><b>    //判断用户是否正常访问：判断是否存在入口常量：ACCESS</b></div><div><b>    if (!defined('ACCESS')) {</b></div><div><b>        //不是通过入口进来：index.php，不允许访问，引导客户正常访问：访问index.php</b></div><div><b>        header('Location:../index.php');</b></div><div><b>    }</b></div><div><b>    //定义类：类名与文件同名（建议区分大小写）</b></div><div><b>    class App{</b></div><div><b>        //面向对象：应该尽可能的增加对成员的控制（能私有尽量私有）</b></div><div><b>      <span style="color: rgb(255, 0, 0);">  //1、增加方法：初始化显示编码</span></b></div><div><b>        private static function iniCode(){</b></div><div><b>            //设置浏览器解析编码为utf-8</b></div><div><b>            header('Content-type:text/html;Charset=utf-8');</b></div><div><b>        }</b></div><div><b>      <span style="color: rgb(255, 0, 0);">  //2、增加方法：初始化目录常量</span></b></div><div><b>        private static function iniDir(){</b></div><div><b>            //获取绝对路径：__DIR__/__FILE__</b></div><div><b>            define('ROOT',str_replace('Core','',str_replace('\\', '/', __DIR__)));</b></div><div><b>            define('APP',ROOT.'App/');     //E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/App/</b></div><div><b>            define('CONFIG',ROOT.'Conf/');</b></div><div><b>            define('CORE',ROOT.'Core/');</b></div><div><b>            define('PUBLIC',ROOT.'Public/');</b></div><div><b>            define('VENDOR',ROOT.'Vendor/');</b></div><div><b>        }</b></div><div><b>        <span style="color: rgb(255, 0, 0);">//3、设置系统错误控制：</span></b></div><div><b>        private static function iniError(){</b></div><div><b>            //设置是否显示错误，以及显示错误级别</b></div><div><b>            @ini_set('display_errors',1);//这里的1代表on</b></div><div><b>            @ini_set('error_reporting',E_ALL);//设置 PHP 的报错级别并返回当前级别</b></div><div><b>        }</b></div><div><b>        <span style="color: rgb(255, 0, 0);">//4、解析URL:判断用户的请求:p:platform,c:controller,a:action</span></b></div><div><b>        public static function iniURL(){</b></div><div><b>            $p=isset($_REQUEST['p'])?$_REQUEST['p']:'Home';</b></div><div><b>            $c=isset($_REQUEST['c'])?$_REQUEST['c']:'Index';</b></div><div><b>            $a=isset($_REQUEST['a'])?$_REQUEST['a']:'index';</b></div><div><b>            //保证平台和控制器首字母大写：ucfirst,其他字符小写：strtolower</b></div><div><b>            $p=ucfirst(strtolower($p));</b></div><div><b>            $c=ucfirst(strtolower($c));</b></div><div><b>            //因为普通变量不能在其他地方使用,所以将三个变量设置成常量。</b></div><div><b>            define('PLAT',$p);</b></div><div><b>            define('CONTROLLER',$c);</b></div><div><b>            define('ACTION',$a);</b></div><div><b>        }</b></div><div><b>        <span style="color: rgb(255, 0, 0);">//5、URL分发控制器:根据用户的请求找到对应的平台控制器和方法</span></b></div><div><b>        public static function iniDispatch(){</b></div><div><b>            //访问控制器类：找到类（加载），找到对应平台下的控制器</b></div><div><b>            include_once APP.PLAT.'/Controller/'.CONTROLLER.'.class.php';</b></div><div><b>            //因为Controller里面是个类，所以我们需要实例化这个类，但是new不能直接new常量</b></div><div><b>            $c=CONTROLLER;</b></div><div><b>            $a=ACTION;</b></div><div><b>            $c=new $c;</b></div><div><b>            //进入对应的方法</b></div><div><b>            echo &quot;&lt;hr/&gt;&quot;;</b></div><div><b>            $c-&gt;$a();</b></div><div><b>        }</b></div><div><b>      <span style="color: rgb(255, 0, 0);">  //入口方法</span></b></div><div><b>        public static function run(){</b></div><div><b>            // echo __CLASS__;</b></div><div><b>            // 实现编码显示</b></div><div><b>            self::iniCode();</b></div><div><b>            // 初始化目录常量</b></div><div><b>            self::iniDir();</b></div><div><b>            // 初始化错误控制</b></div><div><b>            self::iniError();</b></div><div><b>            // 初始化URL</b></div><div><b>            self::iniURL();</b></div><div><b>            // 实现路由分发</b></div><div><b>            self::iniDispatch();</b></div><div><b>        }</b></div><div><b>    }</b></div><div><b>?&gt;</b></div></div><div><span style="color: rgb(255, 0, 0);"><b>一个默认</b></span><b><span style="color: rgb(255, 0, 0);">平台控制器和方法</span></b> <span style="color: rgb(255, 0, 0);"><span style="font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>index.class.php文件</b></span></span></div><div><span style="color: rgb(0, 0, 0); font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/App/Home/Controller/index.class.php</b></span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><b>//后台控制器</b></div><div><b>class Index{</b></div><div><b>    //默认方法</b></div><div><b>    public function index(){</b></div><div><b>        echo &quot;aaa&quot;;</b></div><div><b>    }</b></div><div><b>}</b></div></div><div>aaa</div><div><hr/></div><div>aaa</div><div><span style="font-family: Simsun;">？？为什么有两个输出？，注释</span><b>$c-&gt;$a();后仍有输出aaa</b></div><div><b>Index类名和方法名尽量不要同名，方法名不区分大小写，否则会执行两次。</b></div></div></div></div></div></div></div></div></div></span>
</div></body></html> 