<html>
<head>
  <title>MySql2-day9数据库（字符集、存储引擎、数据类型）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="755"/>
<h1>MySql2-day9数据库（字符集、存储引擎、数据类型）</h1>

<div>
<span><div><b><span style="font-size: 19px;">MySql2-day9数据库（字符集、存储引擎、数据类型）</span></b></div><div><b><span style="font-size: 16px;">一、字符集 ：</span></b>字符及其编码集合就是字符集（character set）。</div><div>     <b>(1) 常用字符集：ASCII，</b></div><div style="margin-left:40px;">big5(繁体中文),GB2312，GBK（简体中文）一个字符是两个字节，其中英文和数字还是一字节</div><div style="margin-left:40px;">latin1(英文字母)一个字符是一个字节</div><div style="margin-left:40px;">UTF8（8-bit Unicode Transformation Format国际编码）一个<span style="color: rgb(255, 0, 0);">中文</span>字符是3个字节其中英文和数字还是一字节</div><div>       查看服务器可用的字符集： 1.使用phpMyAdmin查看     2.<b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">cmd--show character set;</span></b></div><div>查看当前环境数据库各个结构的字符集编码：show variables like 'character_set_%';</div><div><b>     (2)校验集：</b>对于数据英文字母大小写是否进行区分。查看：<b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">show collation;</span></b></div><div>     1.    <b>校对规则</b> ：是指<b>在同一字符集内字符之间的比较排序规则</b>。(collation，collate,整理) </div><div>     2.校验集命名规范3种</div><div>          以校对规则对应的字符集名称开头，中间部分通常为语言，以_ci/_cs/_bin结尾。</div><div>          1- <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">_ci:</span>表示大小写<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">不敏感</span>insensitive(A==a),2- <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">_cs</span>:大小写<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">敏感</span>sensitive(A!=a),3- _<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">bin</span>:按ASCII<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">编码值</span>比较a&gt;A。</div><div>    <b> (3)字符集和校对规则对应关系</b></div><div style="margin-left:40px;">一种校对规则，唯一对应一个字符集。</div><div style="margin-left:40px;">一个字符集可以对应多种校对规则，其中有一个是默认校对规则(Default YES)；</div><div>     <b>(4)字符集及校对规则的设置</b></div><div>          1、查看当前环境的字符集设置<b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">show variables like 'character_set%';</span></b></div><div style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:3.52mm;"><div>               <img src="MySql2-day9数据库（字符集、存储引擎、数据类型）_files/Image.png" type="image/png" style="height:auto;" width="417"/></div><div style="margin-left:40px;">2、客户端设置：</div><div style="margin-left:40px;">设置接收客户端的字符集编码set character_set_client=gbk;</div><div style="margin-left:40px;">设置返回客户端的字符集编码set character_set_results=gbk;</div><div style="margin-left:40px;">设置完毕以后就可以存储或者读取中文字符。</div><div style="margin-left:40px;">快捷设置： <b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">set names gbk</span></b> 可以同时设置三个值，分别是<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">接收客户端</span>数据，<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">返回客户端数据</span>和<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">连接处理层</span>的字符集编码。</div><div style="margin-left:40px;"><b>set</b> 是会话模式，意味着<b>一旦退出</b>，就<b>还原</b>，所以建议在每次登陆数据库的时候，第一时间输入<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">set names gbk；</span></div><div style="margin-left:40px;">cmd的字符集编码是gbk不能修改。所以要让cmd处理汉字，必须每次进入mysql数据库设置set names gbk；</div><div style="margin-left:40px;">3、服务器端设置：</div><div style="margin-left:40px;">     继承关系：</div><div style="margin-left:80px;">创建数据库时不指定字符集，数据库继承数据库服务器默认字符集</div><div style="margin-left:80px;">创建数据表时不指定字符集，数据表继承数据库字符集</div><div style="margin-left:80px;">可以设置字段字符集，字段字符集优先级最高。</div><div style="margin-left:40px;">一般情况下，工作中不会给字段单独设置字符集编码，所以一般是以表格的字符集编码为主。</div><div>          服务器端设置默认的字符集编码：</div><div style="margin-left:80px;">1.打开my.ini，搜索character-set-server，可以修改默认的字符集编码。重启mysql即可。</div><div style="margin-left:80px;">    这个修改是永久生效。语法：<b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">character_set_server=utf8;</span></b></div><div style="margin-left:80px;">2.   set character_set_server = 字符集编码， 会话模式的修改，当退出的时候会自动还原。</div><div><b>     (5)</b>创建和修改数据库，表格和字段时<b>字符集编码以及校验集设置和修改</b></div><div style="margin-left:40px;"><b>创建数据库时</b>修改：<b>create database 数据库名称 charset=字符集  collate=校验集</b></div><div style="margin-left:40px;">创建<b>表格</b>时修改：create table 表名() <b>charset=字符集 collate=校验集</b></div><div style="margin-left:40px;">创建<b>字段</b>时修改：create table 表名( 字段名 字段数据类型 字段属性 <b>charset 字符集 collate 校验集</b>);</div><div>注意：设置字段时，校验集和字符集不能加上=，用空格区分。</div><div style="margin-left:40px;"><b>修改数据库时</b>修改：alter database 数据库名称 charset=字符集 collate =校验集</div><div style="margin-left:40px;">修改<b>表格</b>时修改：alter table 表名 charset=字符集 collate=校验集</div><div style="margin-left:40px;">修改<b>字段</b>时修改：alter table modify 字段名 字段类型 字段属性 charset 字符集 collate 校验集</div><div style="font-weight: bold; font-size: 26px;"><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>二</b></span></font> <font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>存储引擎</b></span></font></div><div style="margin-left:40px;">数据表在内存或磁盘上的存储方式。存储引擎关系到数据表的性能。</div><div style="margin-left:40px;">- 查看MySQL支持的存储引擎：<b>show engines;<span style="font-size: 26px;"><span style="font-size: 14pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">  </span></span></span></span></b></div><div style="margin-left:40px;">1、<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Innodb存储引擎</span>： Windows环境下MySQL数据库数据表的默认存储引擎</div><div style="margin-left:40px;">     创建一个InnoDB表，对应在磁盘内db1下创建一个（<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">.frm</span>）<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">表结构</span>文件，所有的InnoDB<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">表数据</span>都放在mysql的data文件下，文件名是<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">ibdata</span>。数据较多时可以自动分为ibdata1,ibdata2…</div><div style="margin-left:40px;">     引擎特点：1- 数据更新速度快，2- 支持事务,-不易产生大量垃圾碎片；3- 插入和读取稍慢；</div><div style="margin-left:40px;">2、<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Myisam存储引擎</span></div><div style="margin-left:40px;">- 当创建一个MyISAM作为存储引擎的数据表时，就会在磁盘上建立三个文件：</div><div style="margin-left:40px;">    1 .frm 表的结构文件；</div><div style="margin-left:40px;">    2 .MY<span style="color: rgb(255, 0, 0);">D</span> 表的<span style="color: rgb(255, 0, 0);">数据</span>文件；</div><div style="margin-left:40px;">    3 .MY<b><span style="color: rgb(209, 0, 255);">I</span></b> 表的<b><span style="color: rgb(209, 0, 255);">索引</span></b>。（索引相当于目录。实现数据的快速定位）    </div><div>           特点：MyISAM存储引擎数据表<b>独立</b>于操作系统,可轻松<b>备份及移植数据，将三文件复制到别的数据库即可</b>；</div><div>               1- 数据表拥有较高的写入和查询速度；2- 数据更新效率低，3- <b>不支持</b>事务，4-易产生大量垃圾碎片</div><div>          3、<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">存储引擎修改</span>：<b>alter table tb3 engine innodb;</b></div><div style="margin-left:40px;">4、<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">存储引擎的选择</span></div><div style="margin-left:80px;"><b>- myisam：支持全文索引和表压缩</b></div><div style="margin-left:80px;">写入、读取数据速度非常快，适合使用场合dedecms/phpcms/discuz/微博系统，新闻网站等写入、读取操作多的系统。</div><div style="margin-left:80px;"><b>- innodb:支持事务和外键</b></div><div style="margin-left:80px;">更新速度比较快，适合业务逻辑比较强的系统，修改操作较多的，例如ecshop商城系统、crm、办公系统。需要事务支持等场合，如银行等。</div><div style="margin-left:40px;">insert into 表 select * from 表（蠕虫复制）；自己复制自己，成次方增加。</div><div><b><b><font color="#010101" face="宋体" size="4"><span style="font-size:14pt">三</span></font> <font color="#010101" face="Cambria" size="4"><span style="font-size:14pt">MySQL</span></font></b><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>数据类型</b></span></font></b></div><div><b>     分类</b></div><div style="margin-left:40px;">- 整型：tinyint、smallint、mediumint、int、bigint占用字节分别为1、2、3、4、8</div><div style="margin-left:40px;">- 浮点型：float、double、decimal     占用字节分别为4、8</div><div style="margin-left:40px;">- 字符型： char、varchar、enum、set</div><div style="margin-left:40px;">- 文本型：tinytext、mediumtext、text、longtext，blob等</div><div style="margin-left:40px;">- 日期时间型：date、time、datetime、timestamp、year</div><div><span style="font-size: 16px;"><b>     1. 整型</b></span></div><div>     Int[(M)],Smallint[(M)],tinyint[(M)]……- M表示<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="color: rgb(255, 0, 0);">最小的</span></span>显示宽度,表示最小M位，不足M位前补0</div><div style="margin-left:40px;">-[(M)]可选，表示整型的最小显示宽度。如果整数不够指定宽度，则左侧用空格填充。如果整数超出M指定的宽度而不超出表示范围，则值不受影响。</div><div>        <b>  1.1Zerofilll 零填充属性</b>：例---id int(5) zerofill</div><div>                  表示不够显示宽度[(M)]大，将原来默认的空格填充改为<b>零（0）</b>填充。</div><div>               - 必须位于类型之后，not null 之前。- 添加zerofill 属性后，自动添加unsigned属性。</div><div style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div><b><font color="#010101" face="Cambria"><span style="font-family: Cambria; color: rgb(1, 1, 1); font-style: normal;"><span style="font-size: 11pt;">     1.2</span>Unsigned</span></font> <font color="#010101" face="宋体">无符号属性--语法：</font></b>字段名 int unsigned 字段属性</div></div><div style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:3.52mm;"><div style="margin-left:80px;">添加unsigned属性之后，字段不可以存储负数。从0开始正数部分相应的扩大一倍。</div><div style="margin-left:80px;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">如果不存储负数，尽量添加unsigned属性。</span></div><div style="margin-left:40px;"><b>1.3 整型类型的选择</b></div><div style="margin-left:80px;">3.1首先考虑表示范围，其次是存储空间。</div><div style="margin-left:80px;">3.2尽量添加unsigned属性（不存储负数时）。</div><div style="margin-left:80px;">3.3Tinyint适合存储年龄，身高（cm为单位），分类编号，学院编号等</div><div style="margin-left:80px;">3.4mediumint unsigned，int unsigned</div></div><div><span style="font-size: 16px;"><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>     2、浮点型:float[(M,D)]、double</b></span></font></b><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>[(M,D)]</b></span></font></b> <b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>、decimal</b></span></font></b><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>[(M,D)]</b></span></font></b> <b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>占用字节分别是4、8、<span style="color: rgb(255, 0, 0);">（约M/2+1）</span></b></span></font></b></span></div><div>          M--<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">有效</span>数字的位数，D--小数数字的位数。对于0.12345，M= 5 ，D=5</div><div>     float<span style="color: rgb(255, 70, 53);">默认</span>情况下为6位有效数字，超出6位四舍五入。double<span style="color: rgb(255, 70, 53);">默认</span>情况下为16位有效数字</div><div>     Decimal，默认的为（10，0）。存储小数时需要修改M,D.<font color="#010101" face="Calibri"><span style="font-size:11pt">Decimal</span></font><font color="#010101" face="宋体">数据类型最多可以存储</font><font color="#010101" face="Calibri">30</font><font color="#010101" face="宋体">位小数：</font></div><div style="margin-left:40px;">- Float,double不精确存储，类似工资的数据不能用浮点型存储。</div><div style="margin-left:40px;">要精确存储时使用定点型。Decimal是小数和整数分开存储，小数30位内永远精确。</div><div style="margin-left:40px;">- 如果可以使用整型存储，不建议使用浮点型。</div><div style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:3.52mm;"><div style="margin-left:40px;">不指定M,D时，float,double存储情况：</div><div>                    <img src="MySql2-day9数据库（字符集、存储引擎、数据类型）_files/Image [1].png" type="image/png" alt="graphic" border="0" height="111" style="height: auto;" width="390"/></div><div><span style="font-size: 16px;"><b>     3、字符型：</b></span></div><div><b><span style="font-size: 16px;">         </span>3.1 <span style="font-size: 16px;">char（N）和varchar（N）</span></b>最大支持字符分别为255和65535</div><div>             <b>  M</b>表示最大的存储长度，指定char或者varchar的时候<b>必须要</b>指定最大长度。</div><div>              注意：一条记录最多支持65535个字节</div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:10mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 53pt;"><div><img src="MySql2-day9数据库（字符集、存储引擎、数据类型）_files/Image [2].png" type="image/png" style="height: auto;"/></div><div>          Char和varchar区别：</div><div>          <img src="MySql2-day9数据库（字符集、存储引擎、数据类型）_files/Image [3].png" type="image/png" style="height: auto;"/></div><div style="margin-left:40px;">Char是<span style="color: rgb(255, 0, 0);">定长字符串</span>。不足最大长度，使用空格填充。固定占N字符</div><div style="margin-left:40px;">Varchar<span style="color: rgb(255, 0, 0);">变长的字符串</span>，<span style="color: rgb(255, 0, 0);">专门</span>使用1到2个字节<span style="color: rgb(255, 0, 0);">保存</span>字符串<span style="color: rgb(255, 0, 0);">长度</span>。最小1字符，最多占N+1字符。</div><div style="margin-left:40px;">空间上varchar较为灵活，<span style="color: rgb(255, 0, 0);">处理速度上char较高。</span></div></div><div style="margin-left:40px;"><span style="font-size: 16px;"><b>3.2枚举：enum</b></span>枚举类似于html中的单选框，也就是给出几个选项，必须要从其中选择一个。</div><div style="margin-left:80px;">     enum中的选项存储在mysql中，底层是以整数进行存储的，1代表第一个选项，2代表第二个选项。。。。。</div><div style="margin-left:80px;">     使用()来罗列可选项，每个选项使用<b><span style="color: rgb(255, 0, 0);">' '</span></b>包括。字段的默认值只能是罗列的值中的某一个。</div><div style="margin-left:80px;">     如果存储的是null，null存储进去以后，是以整数0进行存储的。 最大取值65535</div><div style="margin-left:80px;"><b><i>例：alter table student modify gender enum('男','女','保密') not null default '保密';//注意enum也是字符型，不能和float ,int等同时使用</i></b></div><div style="margin-left:40px;"><span style="font-size: 16px;"><b>3.3集合：set</b></span>类似于html中的复选框，可以一次性选择多个值。 最大取值64。</div><div style="margin-left:40px;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:10mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 81pt;"><div><img src="MySql2-day9数据库（字符集、存储引擎、数据类型）_files/Image [4].png" type="image/png" style="height:auto;" width="426"/></div><div>第一个是2^0，第二个是2^1，第三个是2^2以此类推。选择多项直接将几项的值相加即可。</div><div>集合存储内容底层代码就是一个按位或的过程。</div></div></div><div style="margin-left:40px;">思考：  若一个枚举占用的空间是2个字节，这个枚举型的数据最多可以有多少个选项？答案：65535个选项。</div><div style="margin-left:40px;">思考：  已知一个集合占用空间是8个字节，这个集合型的数据最多可以有多少个选项？答案：64个选项。</div><div style="margin-left:40px;">一个字节8位， 一个中文字符GBK下2个字节，UTF8下是3个字节</div><div style="margin-left:40px;"><span style="font-size: 16px;"><b>3.4文本型</b></span></div><div style="margin-left:80px;">数据类型tinytext、text、mediumtext、longtext分别占用空间2^8-1、2^16-1、2^24-1、2^32-1。</div><div style="margin-left:80px;">数据类型tinyblob、blob、mediumblob、longblob分别占用空间2^8-1、2^16-1、2^24-1、2^32-1。</div><div style="margin-left:80px;"> Blob用来存储媒体类型等文件的二进制字符串信息等。  </div><div style="margin-left:80px;">注意：通常情况下，我们不会将图片，音乐或者视频直接存储在数据库内部，因为占据的空间很大，我们通常情况下存储的就是文件所在的路径。</div><div style="margin-left:40px;"><span style="font-size: 16px;"><b>3.5日期时间型</b></span></div><div style="margin-left:80px;">date 的取值范围是从0-0-0一直到9999-12-31</div><div style="margin-left:80px;">除了使用字符串来存储，同样也可以用数字进行存储，但是存储的数字需要保证8位。</div><div style="margin-left:80px;">time 除了使用字符串来存储以外，也可以用数字存储，并且没有位数要求。例20170104</div><div style="margin-left:80px;">时间戳是从1970-01-01早上8点开始计算一直到2038-01-19 11:14:07结束。</div><div style="margin-left:80px;">year取值是1901--2055年，如果year只存储2位数，如果这个数字小于70,则是20XX年，如果这个数字大于70，则是19XX。</div><div style="margin-left:40px;">仅添加name，work_year字段数据时，upd_time(timestamp类型)字段数据进行自动更新，获取系统当前时间：</div><div style="margin-left:40px;">Timestamp具备默认值和自动更新功能，可以用来记录数据的更新时间。datetime是从00年00秒开始</div><div style="margin-left:40px;">可以使用函数 now() 或 current_date变量、current_time变量、current_timestamp变量插入当前日期时间信息。now()函数可以获取系统当前时间。</div><div><span style="font-size: 16px;"><b>4、类型总结</b></span></div><div>    类型选择原则1、满足表示范围2、尽可能占用少的空间(能用整型尽量使用整型)</div><div>          部分日期时间型类型可以使用int代替。</div><div style="margin-left:80px;">int--&gt;tinyint,mediumint</div><div style="margin-left:80px;">unsigned</div><div style="margin-left:80px;">int&lt;--float</div><div style="margin-left:80px;">char&lt;--&gt;varchar</div><div style="margin-left:80px;">varchar-&gt;enum/set</div><div style="margin-left:80px;">datetime,timestamp-&gt;int</div></div></div></span>
</div></body></html> 