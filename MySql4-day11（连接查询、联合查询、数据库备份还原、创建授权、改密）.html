<html>
<head>
  <title>MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1185"/>
<h1>MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）</h1>

<div>
<span><div><span style="font-size: 19px;"><b>MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）</b></span></div><div><div><b><span style="font-size: 16px;">一、连接查询</span></b></div><div style="margin-left:40px;"><b>1、<span style="color: rgb(255, 0, 0);">内连接</span></b><b>inner join……on</b></div><div style="margin-left:80px;"><b>inner join语法：  select 字段列表 from 表1 <span style="color: rgb(229, 0, 255);">inner join</span> 表2 <span style="color: rgb(229, 0, 255);">on</span> <span style="color: rgb(255, 0, 0);">表1.字段=表2.字段</span>。</b></div><div style="margin-left:80px;"><b>          inner可以省略不写，</b> 连接查询就是将两张表进行一个拼接，然后生成一个新的结果。</div><div>                    <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image.png" type="image/png" style="height:auto;" width="408"/></div><div>          <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [1].png" type="image/png" alt="graphic" style="height: auto;"/></div><div>          <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [2].png" type="image/png" alt="graphic" style="height: auto;"/></div><div style="margin-left:40px;"><b>思考1： select * from 表1 inner join 表2 on 条件 和 select * from 表2 inner join 表1 on 条件，记录的值是否一样？</b><b>答案： 是一样的。</b></div><div style="margin-left:40px;"><b>思考2： 如何进行<span style="color: rgb(255, 0, 0);">三张表</span>的<span style="color: rgb(255, 0, 0);">内连接</span>查询</b><b>答案： select * from 表1 inner join 表2 on 条件 inner join 表3 on 条件。</b></div><div><b>          2、<span style="color: rgb(255, 0, 0);">左连接</span></b><b>left join……on</b> <b>：</b>又叫左外连接，连接操作时以左表的数据为准。</div><div style="margin-left:80px;"><b>语法 : select 字段列表 from 表名 <span style="color: rgb(255, 0, 0);">left join</span> 表名 <span style="color: rgb(255, 0, 0);">on</span> 条件。</b></div><div style="margin-left:80px;"><div>思考： select * from 表1 left join 表2 和 select * from 表2 left join 表1记录内容是否一样？</div></div><div style="margin-left:80px;"><b>答案： 不一样，是以左表中的数据为准，如果左边中的数据右边中没有对应的关系，那么直接显示null</b></div><div>                         <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [3].png" type="image/png" alt="graphic" style="height: auto;"/></div><div><b>          3、<span style="color: rgb(255, 0, 0);">右连接</span></b><b>right join……on</b> <b>：</b>又叫右外连接，以右表中的数据为主。</div><div>                  <b>  语法： select * from 表1 <span style="color: rgb(255, 0, 0);">right join</span> 表2 <span style="color: rgb(255, 0, 0);">on</span> 条件</b></div><div>                    <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [4].png" type="image/png" alt="graphic" style="height: auto;"/></div><div><b>               思考1： select * from 表1 left join 表2 和 select * from 表2 right join 表1 ,显示的记录内容是否一样？</b></div><div><b>               答案2： 都是以表1为主，显示的内容是一样的。</b></div><ol><li style="display:inline;list-style:none;"><ol><li style="display:inline;list-style:none;"><ol><li><b>自然连接</b></li></ol></li></ol></li></ol><div style="margin-left:40px;"><b>4.1</b><span style="color: rgb(255, 0, 0);"><b>自然内连接</b> </span>      natural join</div><div style="margin-left:40px;"><b>4.2<span style="color: rgb(255, 0, 0);">自然左</span>连接</b>       natural left join</div><div style="margin-left:40px;"><b>4.3<span style="color: rgb(255, 0, 0);">自然右</span>连接  </b>     natural right join</div><div>                    <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [5].png" type="image/png" alt="graphic" style="height: auto;"/></div><div>          自然连接会自动的去找两张表中的相同字段，然后利用相同字段去进行连接，并且相同的字段只会显示一个。</div><div>                    <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [6].png" type="image/png" alt="graphic" style="height: auto;"/></div><div><b>               思考： 如果两张表中存在着多个同名字段，会怎么处理？</b><b>答案： 只有当多个同名字段的值全部相等，那么才会显示这条记录。</b></div><div>                    <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [7].png" type="image/png" alt="graphic" style="height: auto;"/></div><div><b>          5、using()可部分情况代替on 条件。</b></div><div>               在左连接，右连接和内连接时可以不使用on，直接使用using()，可以指定一个同名字段去自动连接。</div><div>                    <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [8].png" type="image/png" alt="graphic" style="height: auto;"/></div><div>               using显示的结果和自然链接的结果大体相似，<b>using</b>指定的<b>同名字段</b>只<b>显示一次</b>。</div></div><hr/><div>//测试数据-------<b>通过以下测试来练手</b></div><div>/*stuinfo测试数据*/</div><div>create table stuinfo</div><div>(</div><div>    stuNo char(6) primary key,</div><div>    stuName varchar(10) not null,</div><div>    stuSex char(2) not null,</div><div>    stuAge tinyint not null ,</div><div>    stuSeat tinyint not null,</div><div>    stuAddress varchar(10) not null</div><div>);</div><div>insert into stuinfo values ('s25301','龙傲天','男',18,1,'北京');</div><div>insert into stuinfo values ('s25302','皮卡丘','男',31,3,'上海');</div><div>insert into stuinfo values ('s25303','皮丘','女',22,2,'北京');</div><div>insert into stuinfo values ('s25304','诸葛傲天','男',28,4,'天津');</div><div>insert into stuinfo values ('s25305','诸葛翠花','女',23,7,'河南');</div><div>insert into stuinfo values ('s25318','王狗蛋','男',26,6,'天津');</div><div>insert into stuinfo values ('s25319','梅超风','女',23,5,'河北');</div><div><br/></div><div>/*stuMarks测试数据*/</div><div>create table stuMarks</div><div>(</div><div>    examNo char(7) primary key,</div><div>    stuNo char(6) not null ,</div><div>    writtenExam int,</div><div>    labExam int</div><div>);</div><div>insert into stumarks values ('s271811','s25303',80,58);</div><div>insert into stumarks values ('s271813','s25302',50,90);</div><div>insert into stumarks values ('s271815','s25304',65,50);</div><div>insert into stumarks values ('s271816','s25301',77,82);</div><div>insert into stumarks values ('s271819','s25318',56,48);</div><div><br/></div><div>//1显示地区及每个地区参加考试的人数，并按人数降序排列</div><div>select stuaddress,count(writtenexam) from stuinfo left join stumarks using(stuno) group by stuaddress order by count(writtenexam) desc;</div><div>//2显示有学生参加考试的地区和学生姓名</div><div>select group_concat(stuname),stuaddress from stuinfo right join stumarks using(stuno) group by stuaddress;</div><div>select group_concat(stuname),stuaddress from stuinfo left join stumarks using(stuno) group by stuaddress having count(writtenexam)&gt;0;</div><div><br/></div><div>//3显示有学生参加考试的地区</div><div>select stuaddress from stuinfo right join stumarks using(stuno) group by stuaddress;</div><div>select distinct stuaddress from stuinfo right join stumarks using(stuno);</div><hr/><div><span style="font-size: 16px;"><b>二、联合查询</b> <b>union</b></span></div><div>          <b>连接查询</b>是将两张表<b>横向</b>的连接到一起，<span style="color: rgb(229, 0, 255);">联合查询</span>是将两张表<span style="color: rgb(229, 0, 255);">纵向</span>的连接到一起</div><div align="justify" style="min-height: 14pt;"><div style="margin-left:80px;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">select</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">字段列表</span></font> <font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">from tb_name     </span></font></div></div><div align="justify" style="min-height: 12pt;margin-left:80px;"><div><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">union</span></font></div></div><div align="justify" style="min-height: 14pt;"><div style="margin-left:80px;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">select</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">字段列表</span></font> <font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00">from tb_name</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00">；</span></font></div></div><div><div style="margin-left:40px;">联合查询的三不同：</div><ol><li style="display:inline;list-style:none;"><ol><li>如果两张表中的<b>字段名称不一致</b>，<b>可以</b>正常进行联合查询，显示的字段名是以最左边书写的表格为主。</li><li>如果两张表字段的<b>数据类型不一致，也可以</b>正常的联合查询，不影响结果。</li><li>如果两张表选择的<b>字段</b>数量<b>不同</b>，则会<b>报错</b></li></ol></li></ol><div><b>老何有话说： 进行<span style="color: rgb(255, 0, 0);">联合查询</span>时，可以保证字段的数据类型不一致或者字段的名称不一致，但是一定<span style="color: rgb(255, 0, 0);">要保证字段</span>的数量要<span style="color: rgb(255, 0, 0);">一致</span>。</b></div><div>如果联合查询需要分别给两张表做排序，则需要注意一下两点：</div><div>     1.每个select语句使用小括号包裹起来。2.order by 后面必须要加上limit，如果要取出所有的记录limit可以写一个比较大的值。</div><div>               union [all|distinct] 默认是distinct，重复的记录只显示一条。</div></div><div>               <img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [9].png" type="image/png" style="height:auto;" width="491"/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="margin-left:40px;"><b><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    select id,name from student where city like '%西%' order by salary desc limit 100     //工资降序</span></span></span></b></div><div style="margin-left:40px;"><b><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    union                                                                            //排序结果上下组合到一张表</span></span></span></b></div><div style="margin-left:40px;"><b><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    select id,name from student where age&gt;35 order by salary asc limit 100;               //工资升序</span></span></span></b></div></div><div><span style="font-size: 16px;"><b>三、子查询</b></span></div><div>          在查询的结果上再次进行查询就是一个子查询。where 比较运算符(子查询语句)</div><div style="margin-left:40px;"><b>1<span style="color: rgb(255, 0, 0);">.标量子查询</span>：语法：select 语句 where字段 比较运算符 （subquery）;</b></div><div style="margin-left:40px;"><i><b>select * from student1 where salary&gt;(select avg(salary) from student1);</b></i></div><div style="margin-left:40px;">查询返回的结果是一个<b>一行一列</b>的表格。<b> </b></div><div style="margin-left:40px;"><b>2.<span style="color: rgb(255, 0, 0);">列子查询</span></b></div><div style="margin-left:40px;"><b>返回</b>的结果是一个<b>一列多行</b>的表格。（一个字段，多条记录）</div><div style="margin-left:40px;"><i><b>select * from student1 where age in(select age from student1 where name in('宋小花','周同学'));</b></i></div><div style="margin-left:80px;"><b>where 字段 in|not in(子查询语句)</b></div><div style="margin-left:80px;"><b>where 字段 比较运算符 any(子查询语句)</b></div><div style="margin-left:80px;"><b>where 字段 比较运算符 all（子查询语句）</b></div><div><b>思考： in 和 =any是否一样？</b></div><div><b>答案： 一样的， city in (‘北京’,’上海’)=&gt; city=’北京’ or  city=’上海’;</b></div><div style="margin-left:40px;"><b>              city =any(‘北京’,’上海’)=&gt; city=’北京’ or  city=’上海’;</b></div><div><b>思考：  not in 和 !=any是否一样？</b></div><div><b>答案：  不一样，city not in (‘北京’,’上海’)=&gt; city=’北京’ and city=’上海’;</b></div><div style="margin-left:80px;"><b>city !=any(‘北京’,’上海’)=&gt; city!=’北京’ or  city!=’上海’;</b></div><div style="margin-left:80px;"><b>city !=all(‘北京’,’上海’)=&gt; city!=’北京’ and  city!=’上海’;</b></div><div style="margin-left:80px;"><b>not in 相当于!=all</b></div><div style="margin-left:40px;"><b>3.<span style="color: rgb(255, 0, 0);">行子查询</span></b></div><div style="margin-left:40px;"> <b>返回</b>的结果是一个<b>一行多列</b>的表格。（多个字段，一条记录）</div><div style="margin-left:40px;">语法： <b>select * from 表格 where(字段1,字段2) =(select 字段1,字段2 from 表);</b></div><div style="margin-left:40px;">where后面的字段需要放在一个小括号的内部。</div><div style="margin-left:40px;"><b>4.<span style="color: rgb(255, 0, 0);">表子查询</span></b></div><div style="margin-left:40px;"> <b>返回</b>的结果是一个<b>多行多列</b>的表格。（多个字段，多条记录）</div><div style="margin-left:40px;">语法： <b>select * from (表子查询的结果) as 表名</b></div><div style="margin-left:40px;"> 表子查询必须要给结果起一个表名</div><hr/><div>//显示男生和女生的人数
<div>select stusex,count(stusex) from stuinfo group by stusex;</div></div><div>select stusex,count(stusex) from stuinfo where stusex=’男’ union select stusex,count(stusex) from stuinfo where stusex=’女’;</div><div>select sum(stusex='男') as '男',sum(stusex='女') '女' from stuinfo;</div><div><br/></div><div>//查找笔试成绩是80分的学生姓名和学号</div><div>select stuno,stuname from stuinfo inner join stumarks using(stuno)where writtenexam=80;</div><div>select stuno,stuname from stuinfo where stuno=(select stuno from stumarks where writtenexam=80);</div><div><br/></div><div>//查找笔试成绩最高的学生</div><div>select stuno,stuname from stuinfo inner join stumarks using(stuno) order by writtenexam desc limit 1;</div><div>select stuno,stuname from stuinfo where stuno=(select stuno from stumarks order by writtenexam desc limit 1);</div><div>select stuno,stuname from stuinfo where stuno=(select stuno from stumarks where writtenexam=(select max(writtenexam)from stumarks));</div><div><img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [10].png" type="image/png" style="height:auto;" width="890"/></div><div>//查找及格的同学</div><div>select stuno,stuname from stuinfo inner join stumarks using(stuno) where writtenexam&gt;=60;</div><div>select stuno,stuname from stuinfo where stuno in(select stuno from stumarks where writtenexam&gt;=60);</div><div><br/></div><div>//查找不及格的同学</div><div>select stuno,stuname from stuinfo inner join stumarks using(stuno) where writtenexam&lt;60;</div><div>select stuno,stuname from stuinfo where stuno in(select stuno from stumarks where writtenexam&lt;60);</div><div><br/></div><div>//查找缺考的同学</div><div>select stuno,stuname from stuinfo left join stumarks using(stuno) where writtenexam is null;</div><div>select stuno,stuname from stuinfo where stuno not in(select stuno from stumarks);</div><div><img src="MySql4-day11（连接查询、联合查询、数据库备份还原、创建授权、改密）_files/Image [11].png" type="image/png" style="height:auto;" width="749"/></div><hr/><div><div><span style="font-size: 16px;"><b>四、数据的备份及还原</b></span></div><div>          备份数据使用的是mysqldump，还原数据使用的是mysql</div><div style="margin-left:40px;"><b>1.数据的备份</b></div><div style="margin-left:40px;">备份文件的语法： mysqldump[.exe] [-h主机][-P端口号] -u用户名 -p密码 [-d][-B] 数据库[表格] &gt; 路径.文件名.sql</div><div style="margin-left:40px;"><b>-d</b> : 如果存在，是只导出表结构，而<b>不导出数据</b>。默认可不写，</div><div style="margin-left:40px;">C:\WINDOWS\system32&gt;mysqldump -uroot -proot -d db3&lt;e:/db3.sql</div><div style="margin-left:40px;"><span style="color: rgb(255, 0, 0);"><b>-B</b> :</span> 如果存在，那么他不单单导出<b>表结构和表数据</b>，并且还<b>导出数据库的结构，无分号；</b></div><div style="margin-left:40px;">C:\WINDOWS\system32&gt;mysqldump -uroot -proot <b><span style="color: rgb(255, 0, 0);">-B</span></b> db3&lt;e:/db3.sql</div><div>                  -p如果不写密码直接回车，那么回车以后去输入密码</div><div><b>          2.数据的还原</b></div><div style="margin-left:40px;">mysql[.exe] [-h主机名][-P端口号]-u用户名 -p密码 [数据库]&lt; 文件路径.文件名</div><div style="margin-left:40px;">     C:\WINDOWS\system32&gt;mysql -uroot -proot db3&lt;e:/db3.sql</div><div style="margin-left:40px;">如果备份的文件中已经有创建数据库的语法了，那么数据库也可以省略不写</div><div style="margin-left:40px;">     C:\WINDOWS\system32&gt;mysql -uroot -proot &lt;e:/db3.sql</div><div style="margin-left:40px;">source 文件名 是在登陆mysql以后还原文件。</div><div style="margin-left:40px;">     mysql&gt;source e:/db3.sql;</div><div><span style="font-size: 16px;"><b>五、创建用户和用户授权</b></span></div><div style="margin-left:40px;"><b>1.显示所有的用户：<i>select host,user,password from mysql.user;</i></b></div><div style="margin-left:40px;">     host: 代表运行在什么样的ip地址登陆，localhost代表自己本身主机，%代表运行所有的电脑登陆。</div><div style="margin-left:40px;"><b>2.创建用户：create user ‘username’@’ip地址’ [identified by 密码];</b></div><div style="margin-left:40px;">     <i>create user 'hangzhou'@'localhost' identified by '123456';</i></div><div style="margin-left:40px;"><b>3.设置密码：</b> <b>set password [for ‘user’@’ip地址’] = password(‘密码’);</b></div><div style="margin-left:40px;"><b>4.用户授权</b></div><div style="margin-left:40px;"><b>     grant 权限 on 数据库.表格 to ‘user’@’ip地址’[with grant option]</b></div><div style="margin-left:40px;"><b>     grant all privileges on *.* to ‘user ’@‘ip地址’//给用户赋予所有的权限</b></div><div style="margin-left:40px;"><b>5.移除用户的权限</b></div><div style="margin-left:40px;"><b>     revoke 权限 on 数据库.表格 from ‘user’@’ip地址’</b></div><div style="margin-left:40px;"><b>     revoke all privileges on *.* from ‘user’@’ip地址’</b></div><div style="margin-left:40px;"><b>6.删除用户</b></div><div style="margin-left:40px;"><b>     drop user ‘user’@’ip地址’</b></div><div><span style="font-size: 16px;"><b>六、找回密码</b></span></div><ol><li>关闭mysql服务 net stop mysql</li><li>让mysql跳过验证密码的环节 mysqld --skip-grant-tables</li><li>打开一个新的cmd，然后直接输入mysql登陆</li><li>修改密码  update mysql.user set password=password(‘新密码’) where user=’root’;</li><li>tastkill /f /im mysqld   ||  tastkill /f /pid 3228  或者直接在任务管理器中结束mysqld任务</li><li>重新启动mysql服务即可正常登陆</li></ol></div><div><br/></div><div style="font-weight: bold; font-size: 20px;"><font color="#010101" face="Calibri Light" size="4"><span style="font-size:16pt"><b>七、</b></span></font><font color="#010101" face="Calibri Light" size="4"><span style="font-size:16pt"><b>MySQL</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>中的预处理</b></span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">基本语法：</span></font></div><div style="border-top: solid 1px #3382ad; border-left: solid 1px #3382ad; border-right: solid 1px #3382ad;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 18pt; background: #f0f7fd;"><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">//1</span></font><font color="#3382AD" face="宋体" size="2"><span style="font-size:10pt; background:#e0e0e0">、创建预处理语句</span></font></div></div><div style="border-left: solid 1px #3382ad; border-right: solid 1px #3382ad;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt; background: #f0f7fd;"><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">prepare </span></font> <font color="#3382AD" face="宋体" size="2"><span style="font-size:10pt; background:#e0e0e0">预处理指令 </span></font><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">from  SQL</span></font><font color="#3382AD" face="宋体" size="2"><span style="font-size:10pt; background:#e0e0e0">语句</span></font><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">(insert/delete/update/select)</span></font></div></div><div style="border-left: solid 1px #3382ad; border-right: solid 1px #3382ad;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt; background: #f0f7fd;"><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">//2</span></font><font color="#3382AD" face="宋体" size="2"><span style="font-size:10pt; background:#e0e0e0">、设置参数</span></font></div></div><div style="border-left: solid 1px #3382ad; border-right: solid 1px #3382ad;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 10pt; background: #f0f7fd;"><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">set @value = value;</span></font></div></div><div style="border-left: solid 1px #3382ad; border-right: solid 1px #3382ad;"><div align="left" style="min-height: 14pt; background: #f0f7fd;"><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">    //3</span></font><font color="#3382AD" face="宋体" size="2"><span style="font-size:10pt; background:#e0e0e0">、执行预处理</span></font></div></div><div style="border-bottom: solid 1px #3382ad; border-left: solid 1px #3382ad; border-right: solid 1px #3382ad;"><div align="left" style="min-height: 18pt; background: #f0f7fd;"><div><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">    execute </span></font> <font color="#3382AD" face="宋体" size="2"><span style="font-size:10pt; background:#e0e0e0">预处理指令</span></font><font color="#3382AD" face="Courier New" size="2"><span style="font-size:10pt; background:#e0e0e0">;</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    prepare stmt1 from 'insert into user values (null,?,?,?)';//1创建预处理语句</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    set @username='zhangsan';//2设置参数</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    set @password=md5('123456');</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    execute stmt1 using @username,@password;//3执行预处理语句</span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">    select * from user;//4返回执行结果</span></span></div></div></div></div><div>八、MySQL的事务</div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">①开启事务</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">1</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）标准事务：</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">start  transaction;</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">当提交或回滚一个事务之后，事务结束。接下来的操作不在事务操作范围之内。</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">2</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）语句事务：</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">set  autocommit = 0;</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">当提交或回滚一个事务之后，事务不会终止，后面的操作仍处于事务之中。</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">②提交事务：</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">commit;</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">③回滚事务：</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">rollback;</span></font></div></div></span>
</div></body></html> 