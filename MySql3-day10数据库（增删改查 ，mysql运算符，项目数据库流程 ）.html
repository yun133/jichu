<html>
<head>
  <title>MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1043"/>
<h1>MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）</h1>

<div>
<span><div><b><span style="font-size: 19px;">MySql3-day10数据库（</span></b><span style="font-size: 16px;"><b>增删改查</b> ，<b>mysql运算符</b>，<b>项目数据库流程</b></span> <b><span style="font-size: 19px;">）</span></b></div><div><span style="font-size: 16px;"><b>一、</b> <b>数据库的原子操作</b><b>CURD：</b><b>增删改查介绍</b></span></div><div style="margin-left:40px;"><b>     C</b>:Create（ insert ），写入     <b>U</b>:Update，更新     <b>R</b>:Read(select)：查询     <b>D</b>:Delete（drop）删除</div><div><span style="font-size: 16px;"><b>二</b> 、<b><span style="color: rgb(255, 0, 0);">插入</span>操作</b></span></div><div><b><b><b><b><b><b><b><b><b><b><b><b><b>     <span style="color: rgb(229, 0, 255);">语法</span></b><span style="color: rgb(229, 0, 255);">1</span>：</b>insert into 表名</b>[(</b>'字段</b>1'，'</b>字段</b>2',…)</b>] values ('值</b>1'，</b>'值</b>2'，</b>…);</b></div><div style="margin-left:40px;"><b><i>例1：insert into student1 (name,age) values ('张小兽',23);</i></b></div><div style="margin-left:40px;"><b><i>例2：insert into student1 values (null,'宋小花',2,'否',20,default,20110801,'大美女','杭州');</i></b></div><div style="margin-left:40px;">注意：1.1 不指定插入的字段，那么values后面的值和原来表中的字段是一一对应的关系。</div><div style="margin-left:80px;">1.2如果指定插入的字段，指定字段的顺序可以和表格的顺序不一致。</div><div style="margin-left:80px;">1.3插入字段值的顺序一定要和指定的字段一一对应。</div><div><b>     <span style="color: rgb(229, 0, 255);">语法</span></b><b><span style="color: rgb(229, 0, 255);">2</span>： insert into 表名 <span style="color: rgb(229, 0, 255);">set 字段1='值1'</span>，字段2='值2'，…..；字段名称与字段值一一对应：</b></div><div><i><b>          例：insert into student1 set name='郑容和',age=27,salary=3000;</b></i></div><div><b>     <span style="color: rgb(229, 0, 255);">语法3</span>：insert into </b><b>表名</b><b> </b><b><b><b><b><b><b><b><b><b><b>[(</b>'字段</b>1'，'</b>字段</b>2',…)</b>]</b></b></b></b></b> <b>values(记录1)，（记录2）….；//同时<span style="color: rgb(229, 0, 255);">插入多条</span>记录</b></div><div style="margin-left:40px;"><b><i>例：insert into student1 (name,age) values ('郭靖',23),('黄蓉',22),('杨过',25),('小龙女',26);</i></b></div><div>          注意：字段列表根据需要填写，字段列表省略时，记录中各个值与数据表中字段的顺序要一一对应。</div><div><b>     <span style="color: rgb(229, 0, 255);">语法4</span>：insert into </b><b>表名</b> <b>(字段列表) select 字段列表 from 表名；</b></div><div style="margin-left:40px;"><i><b>例：insert into student1(name,intro) select name,intro from student1;//字段顺序要一一对应</b></i></div><div><b>     <span style="color: rgb(229, 0, 255);">蠕虫复制</span></b>：快速数据填充（是自己复制自己）</div><div>     ERROR 1062 (23000): Duplicate entry '张三' for key 'name'//如果设置了UNIQUE KEY `name` (`name`)唯一值，</div><div>     则无法蠕虫复制，解决办法<span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">alter table student1 drop index name;</span></span></div><div><br/></div><div><span style="font-size: 16px;"><b>三、<span style="color: rgb(255, 0, 0);">更新</span>操作</b></span></div><div style="margin-left:40px;"><b>语法：update 表名 set 字段1=值1，字段2=值2,…[<span style="color: rgb(255, 0, 0);">where 条件</span>]；</b></div><div style="margin-left:40px;"><span style="font-size: 16px;"><span style="color: rgb(255, 0, 0);"><b>强调</b></span></span>：通常使用where条件来筛选所更新的记录，不添加where条件会导致整个数据表的对应字段数据被修改：</div><div style="margin-left:80px;"><i><b>例1：update student1 set salary=salary+1000 where gender='女' and address='南方';</b></i></div><div style="margin-left:80px;"><i><b>例2：update student1 set gender='男' where id=9 <span style="color: rgb(255, 0, 0);">or</span> id=11;//同时修改两条记录</b></i></div><div style="margin-left:40px;">注意：<span style="color: rgb(255, 0, 0);">where条件</span>通常<span style="color: rgb(255, 0, 0);">不可省略</span>。如果省略，则更新整个数据表记录。</div><div><span style="font-size: 16px;"><b><b><font color="#010101" face="宋体">四</font></b> <font color="#010101" face="宋体"><b><span style="color: rgb(255, 0, 0);">删除、清空</span>操作</b></font></b></span></div><div style="margin-left:40px;"><b>1.</b><b>删除数据操作---</b><b>语法：<span style="color: rgb(229, 0, 255);">delete from</span> 表名 [<span style="color: rgb(229, 0, 255);">where条件</span>];</b></div><div style="margin-left:40px;">     <b>例</b> <i><b>delete from student1 where id=6;</b></i>//执行delete后id=6无数据，但id会保留。</div><div style="margin-left:80px;"><span style="font-size: 16px;"><span style="color: rgb(255, 0, 0);"><b>强调</b></span></span>： 1.1通常条件下，<span style="color: rgb(229, 0, 255);">where</span>子句<span style="color: rgb(229, 0, 255);">不可以省略</span>，省略时，会<span style="color: rgb(229, 0, 255);">删除</span>整张数据表的<span style="color: rgb(229, 0, 255);">数据</span>，<span style="color: rgb(229, 0, 255);"><b>结构不变</b></span>。</div><div style="margin-left:80px;">            1.2对于有自增长属性的字段，删除整张表记录后，自增长id的起始值不会置1，而是等于原id+1.</div><div style="margin-left:40px;"><b>2.</b><b>清空</b><b>truncate</b><b>操作---<span style="color: rgb(229, 0, 255);">语法：truncate 表名；</span></b></div><div style="margin-left:80px;"> 注意：清空整个数据表的记录。结构不变，id起始值重置为1。</div><div style="margin-left:40px;"><b>3. delete/drop/truncate</b><b>比较</b></div><div style="margin-left:80px;">3.1delete不加where条件，删除整个表的数据，auto_increment字段的值不清除（继续累加）。</div><div style="margin-left:80px;">     delete from<span style="color: rgb(229, 0, 255);"><b>逐行删除</b></span>。效率低。删除数据，不删除数据表结构。</div><div style="margin-left:80px;">3.2truncate不能加where条件（会报错）。自增长字段，值清除，从1开始。（销毁原来的数据表，并创建新数据表）。</div><div style="margin-left:80px;"><span style="color: rgb(255, 0, 0);"><b>     一次性删除</b></span>。删除<b><span style="color: rgb(255, 0, 0);">数据</span></b>，不删除结构。一般来说，清空表都是用truncate。</div><div style="margin-left:80px;">3.3drop删除数据库，数据表，字段。删除数据及结构。</div><div><span style="font-size: 16px;"><b>五</b> <span style="color: rgb(255, 0, 0);"><b>查询操作（</b><b>select</b><b>）</b></span></span></div><div style="margin-left:40px;"><b>1、select[all|distinct] * from 表名 [where 条件][group by 条件][having by 条件][order by 条件][limit 条件];</b></div><div style="margin-left:40px;"><b>     1.1语法初步：<span style="color: rgb(255, 0, 0);">select</span> 字段列表 from tb_name；例<i>select id,name,salary,address from student1;</i></b></div><div style="margin-left:40px;"> 字段列表中可以有数据表中本身字段组合而成的字段：select id,name,salary,address,name+address from student1;</div><div style="margin-left:40px;">          <b>select</b>单独使用就是用来<b>显示</b>后面的内容。例：select 30;//30，例2：select unix_timestamp();//1483707354</div><div style="margin-left:40px;"><b>      1.2<span style="color: rgb(255, 0, 0);">dual</span></b> 伪表：dual不是一个具体的表，它是为了保证语法格式的正确性而进行使用的。select unix_timestamp() from dual;//1483707354</div><div style="margin-left:40px;"><b><span style="color: rgb(255, 0, 0);">     </span> 1.3</b><b><span style="color: rgb(255, 0, 0);">as</span> 字段别名</b> ：<b><i>select id,name <span style="color: rgb(229, 0, 255);">as</span> 姓名,salary as 工资,address as 地址 from student1;</i></b></div><div style="margin-left:40px;">               在结果集中使用字段别名，as也可以省略不写如<b><i>select id,name 姓名 from student1;</i></b></div><div style="margin-left:40px;">      1.<b>4<span style="color: rgb(255, 0, 0);">字段列表</span></b>可以是一个字段，可以是多个，可以使用*代替全部字段select * from student1</div><div style="margin-left:40px;"><b>          字段列表选项all</b>/<b>distinct</b>，显示全部/代表重复的记录只显示一条，默认是all。</div><div style="margin-left:40px;">               <i>select distinct name as 姓名 from student1;//若distinct多条字段，则每条记录完全一样才会去重复。</i></div><div style="margin-left:40px;">          <b>字段</b>：* 代表所有的字段，也可以具体的指定某几个字段。</div><div style="margin-left:40px;"><b>2、<span style="color: rgb(255, 0, 0);">from</span></b><span style="color: rgb(255, 0, 0);"><b>子句</b></span></div><div style="margin-left:40px;">from后面跟多张表时（笛卡尔积，无连接条件） ，如果字段列表为*，则结果集中的列总数为各个表的字段列表之和，行总数为各个数据表的行的乘积：</div><div style="margin-left:40px;">          select * from student1,student3;//两个22行记录的表输出结果22*22=484行                    </div><div style="font-weight: bold; font-size: 15px;margin-left:40px;"><font color="#010101" face="Cambria"><span style="font-size:11pt"><b>3、<span style="color: rgb(255, 0, 0);">where</span></b></span></font><span style="color: rgb(255, 0, 0);"><font face="宋体"><span style="font-size:11pt"><b>子句</b></span></font></span></div><div style="margin-left:40px;"><font color="#010101" face="Calibri"><span style="font-size:11pt">          where</span></font> <font color="#010101" face="宋体"><span style="font-size:11pt">子句对</span></font><font color="#010101" face="Calibri"><span style="font-size:11pt">from</span></font><font color="#010101" face="宋体"><span style="font-size:11pt">原数据表的信息进行筛</span></font><font face="宋体"><span style="font-size:11pt">选，满足条件</span></font><font color="#010101" face="宋体"><span style="font-size:11pt">的作为<b>结果集</b>返回。</span></font></div><div style="margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:3.52mm;margin-left:40px;"><div><b>语法：select 字段列表 from 表名 [where子句]；<i>例1</i><i>select * from student1 where address='南方' and age<span style="color: rgb(255, 0, 0);">&lt;</span>23 ;</i></b></div><div style="margin-left:40px;"><i>例2select * from student1 where address <b>in</b>('浙江','江西');</i></div><div style="margin-left:40px;"><i>例3s</i><i>elect * from student1 where age <b>between</b> 25 <b>and</b> 27;//25&lt;=age&lt;=27,大小顺序不能错</i></div><div style="margin-left:40px;"><i>例4select * from student1 where intro <b>is null</b>;//注意：不能写成where=null,NULL不等于任何值包括自己本身。</i></div><div style="margin-left:40px;"><i>例5select * from student1 where name <b>like '___';</b>//一个下划线匹配一个字符</i></div><div style="margin-left:40px;"><i>例6select * from student1 where name <b>like '%小%';</b>//找到所有包含小的字符</i></div></div><div style="margin-left:80px;"><b>where +in（）或not in（）</b>，in后面罗列字段可取值，使用（）包括。</div><div style="margin-left:80px;"><b>where+between或not between，where+is null或is not null</b></div><div style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:3.52mm;"><div style="margin-left:80px;">匹配符 <b>where</b>+<b>like + <span style="color: rgb(255, 0, 0);">'</span>%<span style="color: rgb(255, 0, 0);">'</span></b>匹配任意多个字符和like + <span style="color: rgb(255, 0, 0);">'</span>_<span style="color: rgb(255, 0, 0);">'</span>匹配一个字符</div><div style="margin-left:80px;">SELECT * from ka where (user_id in (6) <b>or</b> user_id in (10,12));//两句结果相同，union效率更高(索引可用),常用union代替or</div><div style="margin-left:80px;">SELECT * from ka where user_id in (6) <b>union</b> (SELECT * from ka where user_id in (10,12));</div><div style="margin-left:40px;"><b>4、<span style="color: rgb(255, 0, 0);">group by</span>语法：select 字段列表 from 表名 [where子句] <span style="color: rgb(255, 0, 0);">[group by 子句]</span>；分组group by 将字段进行分组，</b>便于数据统计 <b>。</b></div><div style="margin-left:40px;"><b>例：</b><i><b>select gender,count(gender) from student1 group by gender;</b></i>//显示表中所有男生和女生数量</div><div style="margin-left:80px;">SQL中聚合函数对一组值执行计算，并返回单个值。<b>聚合函数</b></div><div style="margin-left:120px;">avg()，返回指定组中的平均值。</div><div style="margin-left:120px;">count()，数量；null不进行统计会忽略空值 ，<b>' '统计。</b>count（*）为记录总行数</div><div style="margin-left:120px;">max()，数据最大值；</div><div style="margin-left:120px;">min()，最小值；</div><div style="margin-left:120px;">sum()，和</div><div style="margin-left:120px;">group_concat(),可以显示一个分组中的普通字段的所有值。group_concat 后面如果是多个字段，会将两个字段进行统一分组，分别进行显示。</div><div style="margin-left:40px;"><i><b>select <span style="color: rgb(255, 0, 0);">group_concat(name,age),</span> gender,count(gender) from student1 group by gender;</b></i>//显示男生和女生数量以及姓名、年龄</div><div style="margin-left:40px;">注意：</div><ul><li style="display:inline;list-style:none;"><ul><li>按照字段进行分组</li></ul></li></ul><ul><li style="display:inline;list-style:none;"><ul><li>通常与聚合函数组合使用</li></ul></li></ul><ul><li style="display:inline;list-style:none;"><ul><li>字段列表一般为分组字段，以及聚合函数。通常不使用一般字段（使用时只显示该字段的第一字段值）</li></ul></li></ul><div>                    <img src="MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）_files/Image.png" type="image/png" alt="graphic" style="height: auto;"/></div><div style="margin-left:80px;">同时按照多个字段进行分组：</div><div style="margin-left:80px;">select address,gender,avg(salary) from student1 group by address,gender;//同时按照地址、性别、和平均薪资分组</div><div style="margin-left:40px;"><b><span style="font-size: 16px;">5、<span style="color: rgb(255, 0, 0);">having条件</span>：</span>select 字段列表from 表名 [where子句] [group by子句] <span style="color: rgb(255, 0, 0);">[having子句]</span>;</b></div><div style="margin-left:80px;">where 是 在原表中进行筛选。having 是对分组结果集进行筛选，通常跟在group by后面 。聚合函数筛选通常是使用having。</div><div style="margin-left:80px;">例：<i><b>select address,max(salary) from student1 group by address having max(salary)&gt;1000;</b></i></div><div style="margin-left:80px;"><i><b>//先按照地址，最高薪资分组，再筛选出分组结果中大于1000的地址和薪资信息。</b></i></div><div style="margin-left:120px;"><i>select stuname,stuaddress from stu where stusex='女';</i>//例：显示性别为女的学生的姓名和住址。</div><div style="margin-left:120px;"><i><b>select stuname,stuaddress from stu having stusex='女';</b></i> 会报错，</div><div style="margin-left:120px;">因为结果集中只有stuname和stuaddress两个字段，没有stusex，无法使用having进行筛选。</div><div style="margin-left:40px;"><b>6、<span style="color: rgb(255, 0, 0);">order by</span></b> <b>排序：select 字段列表 from 表名 [where 子句] [group by 子句] [having子句] <span style="color: rgb(255, 0, 0);">[order by子句];</span></b></div><div style="margin-left:80px;">语法：  <b>order by 字段 [asc|desc]</b>//将表格中的数据按照一定的顺序进行显示。</div><div style="margin-left:80px;">默认是asc代表升序排列，如果改为<b>desc</b>，则为<b>降序</b>排列。</div><div style="margin-left:40px;">               注意：order by 后面如果添加多个字段，每个字段都要重新指定一下排序顺序，并且以第一个字段为主，</div><div style="margin-left:40px;">                         如果第一个字段中的值相等，则继续按照第二个字段进行排序。</div><div style="margin-left:40px;"><b>7、<span style="color: rgb(255, 0, 0);">limit</span></b><span style="color: rgb(255, 0, 0);">：</span> 限制输出的记录数</div><div style="margin-left:40px;">          <b>select 字段列表 from 表名 [where子句] [group by子句] [having子句] [order by子句] <span style="color: rgb(255, 0, 0);">[limit 子句];</span></b></div><div style="margin-left:40px;"><b>          语法： limit n :</b> 从第一条记录开始，连续获得n条记录，</div><div style="margin-left:40px;"><span style="color: rgb(255, 0, 0);"><b>                    limit m,n</b></span> : 从m+1条记录开始，连续获得n条记录，<span style="color: rgb(255, 0, 0);">m</span>为偏移量offset ，如果为0，可以省略。</div><div style="margin-left:40px;">               例：显示语文考试前三名的个人信息<i><b>select * from student1 order by fenshu desc limit 3;</b></i></div><div style="margin-left:40px;">          分页公式：<b>limit  <span style="color: rgb(255, 0, 0);">(page-1)*pagesize</span>，<span style="color: rgb(255, 0, 0);">pagesize</span>。-------（即</b><b>limit <span style="color: rgb(255, 0, 0);">m,n</span></b> <b>）</b></div><div style="margin-left:40px;">pagesize : 每页显示条数，page :  当前页：例limit 5;     limit 5,5;     limit 10,5;//每页5条记录，第一页，第二页，第三页。</div><div><span style="font-size: 16px;"><b>六、select</b> <b>语法高级</b></span></div><div style="margin-left:40px;"><b>select 字段列表 from 表名 [where子句] [group by子句] [having子句] [order by子句] [limit 子句];</b></div><div style="margin-left:40px;">注意：</div><ul><li style="display:inline;list-style:none;"><ul><li>where子句可以进行条件判断，对from子句返回的结果集进行筛选</li></ul></li></ul><ul><li style="display:inline;list-style:none;"><ul><li>group by子句可以对数据进行分组</li></ul></li></ul><ul><li style="display:inline;list-style:none;"><ul><li>having子句可以对分组的结果集进行进一步的筛选</li></ul></li></ul><ul><li style="display:inline;list-style:none;"><ul><li>order by子句可对结果集进行排序</li></ul></li></ul><ul><li style="display:inline;list-style:none;"><ul><li>limit限制最终结果集的输出行数</li></ul></li></ul><ul><li style="display:inline;list-style:none;"><ul><li>注意各个子句之间的顺序不能错</li></ul></li></ul><div><div><span style="font-size: 16px;"><b>七、mysql的运算符</b></span></div><div style="margin-left:40px;">算术运算符：+-*/%；辑运算符：and与、or或</div><div style="margin-left:40px;">比较运算符：&gt;、&lt;、&gt;=、&lt;=、!=(或&lt;&gt;)、=(mysql中=既代表赋值运算也代表比较运算)如：id!=10或id&lt;&gt;10</div><div><span style="font-size: 16px;">八、<span style="color: rgb(255, 0, 0);"><b>项目数据库流程</b></span></span></div><div>                    <img src="MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）_files/Image [1].png" type="image/png" style="height:auto;" width="694"/></div><ol><li style="display:inline;list-style:none;"><ol><li><b>确认需求，让客户签字。</b></li><li><b>文字转换成表格。</b></li><li><b>把表格相互关联。</b></li><li><b>去创建数据库和表格。</b></li></ol></li></ol><div><b>     2、表格和表格的关系</b></div><div><b>          2.1一对一的关系：</b>通常情况下是主键和主键进行关联。</div><div><b>          2.2一对多的关系：</b>主键和非主键进行关联</div><div><b>          2.3多对多的关系：</b>多对多的关系一定存在一个关联表。</div><div>               <img src="MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）_files/Image [2].png" type="image/png" style="height:auto;" width="400"/></div></div><div style="margin-left:40px;">3、<b>案例：0.确定需求</b>BBS论坛---基本功能：</div><div style="margin-left:80px;">3.1用户注册和登录，后台数据库需要存放用户的注册信息和在线状态信息；</div><div style="margin-left:80px;">3.2用户发贴，后台数据库需要存放贴子相关信息，如贴子内容、标题等；</div><div style="margin-left:80px;">3.3用户可以对发帖进行回复（跟帖）；</div><div style="margin-left:80px;">3.4论坛版块管理：后台数据库需要存放各个版块信息，如版主、版块名称、贴子数等；</div><div style="margin-left:40px;"><b>1.标注实体：</b>需求中的名词通常是实体，每个实体对应一张表格。</div><div style="margin-left:40px;"><b>2.设置表格属性：</b>每一个属性对应表中的一个字段。</div><div style="margin-left:40px;">                              </div><div style="margin-left:40px;"><br/></div><div style="margin-left:40px;"><b>3.绘制</b><b>E-R</b><b>图：</b>长方形---表名，椭圆形---字段，菱形---表和表之间的关系（一对一，一对多，多对多）</div><div>             <img src="MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）_files/Image [3].png" type="image/png" style="height:auto;" width="400"/>           <img src="MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）_files/Image [4].png" type="image/png" style="height:auto;" width="515"/></div><div><b>4.案例中完整的E-R图如下</b></div><div>                       <img src="MySql3-day10数据库（增删改查 ，mysql运算符，项目数据库流程 ）_files/Image [5].png" type="image/png" style="height:auto;" width="616"/></div></div></span>
</div></body></html> 