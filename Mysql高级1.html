<html>
<head>
  <title>Mysql高级1</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2869"/>
<h1>Mysql高级1</h1>

<div>
<span><div>典型mysql存储引擎myisam，innodb，memory，csv，mrg_myisam</div><div>myisam存储引擎插入数据速率较快，在插入数据时并不进行排序操作。</div><div>     数据和索引分离，支持表级锁定</div><div>特点：1支持全文索引，2表压缩</div><div>InnoDB</div><div>行级锁定，表级锁定，并发处理较快</div><div>特点：1支持事务,2外键约束：<font color="#010101" face="宋体" size="2"><span style="font-size:10pt">保证关联数据记录间的数据完整性的。</span></font></div><div><br/></div><div><br/></div><div>添加索引：alter table emp add index(empno);</div><div>mysqli,PDO,mysql三种连接数据库方法</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>mysqli在php中的应用</div><div>$link=new mysqli('localhost','root','123456','test'); #1连接数据库</div><div>if ($stmt=$link-&gt;prepare(&quot;select * from curl_songs_num where id in ($ids)&quot;)) { #2预处理语句</div><div>    $stmt-&gt;execute();    #3执行查询语句</div><div>    $stmt-&gt;bind_result($id,$title,$author,$cont);    #4给字段绑定参数</div><div>    while($stmt-&gt;fetch()){</div><div>     //$songs=...;</div><div>     echo &quot;&lt;span style='color:blue'&gt;$song[0]&lt;/span&gt;&lt;br&gt;$song[1]&lt;hr&gt;&quot;;</div><div>    }</div><div>}</div><div>$stmt-&gt;close();</div><div>$link-&gt;close();</div></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>//PDO使用预处理（不使用bindParam，使用bindParam）</div><div>    header(&quot;Content-type:text/html;charset=utf-8&quot;);//1、设置响应头信息</div><div>    try{</div><div>    //2、实例化pdo类</div><div>        $mq='mysql';</div><div>        $user='root';</div><div>        $pass=123456;</div><div>        $dbname='whereit';</div><div>        $dsn=&quot;$mq:host=127.0.0.1;dbname=$dbname&quot;;</div><div>        $time=time();</div><div>        $pdo=new PDO($dsn,$user,$pass);</div><div>        $pdo-&gt;setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);</div><div>    //3、组装SQL语句</div><div>        $sql=&quot;insert into user values(null,:username,:email,:time)&quot;;//一1、预处理使用文本标识</div><div>    //4、定义预处理语句</div><div>        $stmt=$pdo-&gt;prepare($sql);</div><div>    // 二、预处理使用bindParam实现参数绑定（推荐）</div><div>    // 5绑定参数</div><div>    $stmt-&gt;bindParam(':username',$username);</div><div>    $stmt-&gt;bindParam(':email',$email);</div><div>    $stmt-&gt;bindParam(':time',$time);</div><div>    //6设置参数</div><div>    $username='zhouwu';</div><div>    $email='zhouwu@yahoo.com';</div><div>    $stmt-&gt;execute();//7执行预处理语句</div><div>    }catch(PDOException $e){</div><div>        echo &quot;错误编号&quot;.$e-&gt;getCode().&quot;&lt;hr/&gt;&quot;;</div><div>        echo &quot;错误行&quot;.$e-&gt;getLine().&quot;&lt;hr/&gt;&quot;;</div><div>        echo &quot;错误信息&quot;.$e-&gt;getMessage();</div><div>    }</div></div><div>mysql</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;?php     //一、连接数据库zzztest.php</div><div>//(0)数据库配置信息</div><div>$db_host = 'localhost';</div><div>$db_user = 'root';</div><div>$db_pwd  = '123456';</div><div>$db_name = 'whereit';</div><div>//(1)PHP连接MySQL服务器</div><div>$link = @mysql_connect($db_host,$db_user,$db_pwd);</div><div>if(!$link) exit(&quot;PHP连接MySQL失败了！&quot;);</div><div>//(2)选择当前数据库</div><div>if(!mysql_select_db($db_name)) exit(&quot;选择数据库{$db_name}失败了！&quot;);</div><div>//(3)设置请求或返回数据的字符集</div><div>mysql_query(&quot;set names utf8&quot;);</div><div>$sql=&quot;select * from student order by id&quot;;//4编写sql语句</div><div>    $result=mysql_query($sql);              //5执行SQL语句：mysql_query()</div><div>    var_dump($result);                      //resource(4) of type (mysql result)</div><div>    while ($arr=mysql_fetch_assoc($result)) {</div><div>          //6处理结果集          </div><div>     }</div><div>mysql_close();//7关闭连接</div><div>?&gt;</div></div><div><span style="color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">普通的mysql连接肯定是会被抛弃的 因为每次都要防止sql注入的问题 而且相对来说比较慢 </span></div><div><span style="color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">mysqli是在普通mysql的基础上做的一次优化 说实话 很成功 预处理方式完全解决了sql注入的问题,</span><span style="color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">但是唯一的不足点 就是只支持mysql数据库</span></div><div><span style="color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">PDO则是最新出来的一种 连接方式 兼容大部分数据库 也解决了sql注入 但是也有缺点 它只支持php5以上的版本</span></div><div><span style="color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">PDO统一所有数据库抽象层对象接口，mysqli只统一mysql的 </span></div><div><span style="color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">在高负载的情况下.PDO开启长连接能够得到一个相对稳定的负载“值”。但是效率却不是最高的。 </span></div><div><span style="color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">mysql最快。mysqli其次。只是mysql和mysqli在高并发、系统高负载的时候。其所承担的负载也是很可观的。PDO则不会。</span></div></span>
</div></body></html> 