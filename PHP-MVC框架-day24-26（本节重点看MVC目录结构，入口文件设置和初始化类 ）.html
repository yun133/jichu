<html>
<head>
  <title>PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2113"/>
<h1>PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）</h1>

<div>
<span><div><span style="font-size: 21px;"><b>PHP-MVC框架-day24-26</b><span style="font-size: 16px;">（本节重点看MVC目录结构，</span></span><span style="font-size: 16px;">入口文件设置和初始化类 ）</span></div><div><span style="font-size: 21px;">（<span style="font-size: 16px;">本节看控制器、视图、<b>模型</b>、配置文件，</span></span><span style="font-size: 16px;">优化命名，<b>实现自动加载</b>，<b>公共控制器</b></span> <span style="font-size: 21px;">）</span></div><div align="justify"><span style="font-size: 19px;"><b><b><font color="#010101" face="Calibri">MVC</font><font color="#010101" face="宋体">自定义框架</font></b></b></span></div><div align="justify"><b><b><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">一、</span></font><font color="#010101" face="Cambria" size="4"><span style="font-size:16pt">MVC</span></font></b><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>概念</b></span></font></b></div><div align="justify"><span style="font-size: 15px;"><b><b><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt">1、MVC</span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">思想</span></font></b></b></span></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">MVC</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是一种软件</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">设计思想</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（基于</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">面向对象</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）：实现过程就是将<span style="color: rgb(255, 0, 0);"><b>业务逻辑，数据处理，界面显示</b></span>分离开</span></font></div></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">业务逻辑：接受用户请求，判断用户逻辑</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">       C</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Controller</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，控制器，</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">脚本处理业务逻辑，组织模型和控制视图</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">数据（逻辑）：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">对数据的操作（读和写）</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">       M</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Model</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，模型，专门负责数据操作</span></font></div></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">界面显示：将数据放到</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">HTML中</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">显示</span></font></div></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">       V</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">view</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，视图，</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">HTML</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">文件用来显示数据</span></font></div><div><span style="font-size: 15px;"><b><b><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt">2、MVC</span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">图解</span></font></b></b></span></div><div><img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image.png" type="image/png" style="height:auto;" width="613"/></div><div align="justify" style="font-weight: bold;"><div><span style="font-size: 19px;"><b>3.  MVC</b><b>意义</b></span></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">代码发展史</span></font></div><div><img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [1].png" type="image/png" style="height: auto;"/></div></div><ol><li>混编阶段：PHP脚本直接嵌入到HTML中
<ol><li>优点：真正意义上的一个脚本完成一个请求，效率最高</li><li>缺点：比较混乱，特别不容易维护</li></ol></li><li>模板技术：将HTML和PHP脚本分离开来，然后PHP脚本需要显示数据的时候加载HTML文件。
<ol><li>优点：前后台分离，利于开发和维护</li><li>缺点：随着文件的增加，效率有所降低（PHP脚本已经分离，但是还是会存在难以维护和难以实现代码重用的现象）</li></ol></li><li>MVC思想：在模板技术的前提之上（PHP与HTML的分离），再次对PHP进行分层：业务逻辑和数据逻辑进行分离
<ol><li>优点：分离很彻底，非常利于维护；有利于代码重用（正因为如此，MVC收到热捧）</li><li>缺点：文件数增加，影响服务器的解析效率</li></ol></li></ol><div><div align="justify" style="min-height: 14pt;"><span style="font-size: 16px;"><b><font color="#010101">MVC</font><font color="#010101">优点：（重点背）</font></b></span></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>耦合性低</b>：代码与代码之间影响较小（代码重用性较高）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>重用性高</b>：实现更多代码的重复利用</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>部署快</b>：分工明确，提升开发效率</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>可维护性高</b>：分离比较明确，修改起来也很明确，易测试性</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>有利软件工程化管理</b>：分工明确，每个人负责内容很清晰</span></font></div></li></ol><div align="justify" style="min-height: 14pt;"><span style="font-size: 16px;"><b><font color="#010101">MVC</font><font color="#010101">缺点：</font></b></span></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 15pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;">没有明确的定义：</span></font><font color="#333333" size="2"><span style="font-size:10pt">MVC</span></font><font color="#333333" size="2"><span style="font-size:10pt">只是规定了方向（代码该放哪），但是没有规定具体要做什么</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>不适合小型，中等规模的应用程序</b>：开发初始难度增加</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;">增加系统结构和实现的复杂性：文件增加（文件包含增加）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 15pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;">视图与控制器间的过于紧密的连接：视图直接被控制器包含（数据在</span></font><font color="#333333" size="2"><span style="font-size:10pt">HTML</span></font><font color="#333333" size="2"><span style="font-size:10pt">中还是依赖</span></font><font color="#333333" size="2"><span style="font-size:10pt">PHP</span></font><font color="#333333" size="2"><span style="font-size:10pt">解析）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt; font-size: 10pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><font color="#333333" size="2"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-weight: normal; font-style: normal;"><b>视图对模型数据的低效率访问</b>：视图的数据来源于控制器，控制器才能从模型获取数据</span></font></div></li></ol><div align="justify" style="min-height: 14pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">MVC</span></font><font color="#010101" size="2"><span style="font-size:10pt">中优点针对的是开发者：降低开发成本；</span></font><font color="#010101" size="2"><span style="font-size:10pt">MVC</span></font><font color="#010101" size="2"><span style="font-size:10pt">中缺点对应的机器：<b>降低效率</b></span></font></div><div align="justify"><b><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>二、框架概念</b></span></font></b></div><div align="justify"><b><b><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt">1.  </span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt">基本定义</span></font></b></b></div><div align="justify" style="min-height: 14pt;"><div>定义：框架（Framework<font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）是整个或部分系统的</span></font><font face="宋体" size="2"><span style="font-size: 10pt;"><font color="#FF0000">可重用设计</font><font color="#010101">。</font></span></font></div><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">从应用方面定义：</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">表现为一组抽象构件及构件实例间交互的方法</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">;</span></font></div><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">从目的方面定义：</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">框架是可被应用开发者定制的应用骨架。</span></font></div></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">应用方面框架：在框架中定义了很多的工具（</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">脚本），提供的是应用者可以直接调用对应的已经写好的代码去实现对应的功能：提供了很多可用的内容（脚本）</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">目的方面框架：框架将很多需要使用的底层的东西搭建好，然后开发者可以基于已经有的内容实现新的功能：提供了基础核心内容</span></font></div><div align="justify" style="min-height: 13pt;"><div><b><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">框架的本质：实现代码的重复利用（提高开发效率，增加代码的安全性）</span></font></b></div><div><h3 align="justify"><font color="#010101" face="Calibri" size="4"><span style="font-size:16pt"><b>2.  </b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>项目单一入口</b></span></font></h3><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>单一入口</b>：单一入口通常是指一个项目或者应用具有</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">一个统一</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（但并</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">不一定是唯一</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）的入口文件</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>项目单一入口</b>：一个项目或者应用具有一个</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">统一而且唯一</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的入口文件。</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="宋体" size="2"><span style="font-size:10pt"><b>入口文件</b>：并不是一个脚本完成所有的功能，接入到庞大的</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">MVC</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">系统当中（通常用</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">index.php</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">）</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">该</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">MVC</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">中，有多个</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">M</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">、</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">V</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">和</span></font><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">C</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">       C</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">：一个控制器处理一类相关的业务</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">       M</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">：一个模型操作一类相关数据（往往针对一张表）</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#333333" face="Arial" size="2"><span style="font-size:10pt">       V</span></font><font color="#333333" face="宋体" size="2"><span style="font-size:10pt">：一个视图对应用户一个简单请求</span></font></div><div align="justify" style="min-height: 159pt;"><div><img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [2].png" type="image/png" alt="graphic" border="0" height="213" style="height: auto;" width="547"/></div><div><b><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>三、搭建</b></span></font><font color="#010101" face="Cambria" size="4"><span style="font-size:16pt">MVC</span></font><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>自定义框架</b></span></font></b></div><div><ol><li><b>搭建框架目录</b><ol><li><b>掌握框架整体架构</b></li></ol></li></ol><ol><li>项目只有一个入口：index.php</li><li>文件夹分层：不同功能的脚本放到不同的文件夹
<ol><li><span style="color: rgb(255, 0, 0);">控制器</span>：专门存放处理业务的控制器类（MVC基于面向对象）</li><li><span style="color: rgb(255, 0, 0);">模型</span>：专门存放处理数据库的模型类</li><li><span style="color: rgb(255, 0, 0);">视图</span>：专门存放显示数据的HTML文件（前端提供）</li><li>插件：插件就是别人提供好的工具文件</li><li>公共文件：存放js，css和image文件</li><li><span style="color: rgb(255, 0, 0);">核心文件夹</span>：存放存放核心文件（存放一些公共代码）</li><li>配置文件：存放配置文件</li></ol></li></ol><div align="justify" style="min-height: 13pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">通常，一个框架的存在，势必有</span></font><font color="#FF0000" size="2"><span style="font-size:10pt">控制器、模型、视图和核心文件夹</span></font></div><div><span style="color: rgb(255, 0, 0);">--------------------------------------------------------------------------------------</span></div></div></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="display:inline;list-style:none;"><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 12pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; color: rgb(1, 1, 1);"><div align="justify" style="min-height: 13pt;"><span style="font-size: 16px;"><b><font color="#010101">搭建框架目录结构</font></b></span></div></li></ol></li></ol><div align="justify" style="min-height: 13pt;"><div><font color="#010101" size="2"><span style="font-size:10pt">两种目录结构方式：一个是扁平化，一个是分层</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">扁平化：不论前后台都属于同一层目录（</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ThinkPHP</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）</span></font></div><div align="justify" style="min-height: 234pt;"><div><img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [3].png" type="image/png" alt="graphic" border="0" height="313" style="height: auto;" width="552"/></div></div><div><img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [4].png" type="image/png" style="height: auto;"/> day1<img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [5].png" type="image/png" style="height: auto;"/>day2<img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [6].png" type="image/png" style="height: auto;"/></div><div><span style="font-size: 19px;"><font color="#010101" face="宋体"><span style="font-family: ����;"><b>2.</b></span></font><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>搭建项目虚拟主机</b></span></font></b></span></div><div><span style="font-family: ����;"><span style="color: rgb(1, 1, 1);">注意apache的httpd.conf要屏蔽# DirectoryIndex index.html index.php,否则虚拟主机只要出现index.php就会直接打开。</span></span></div><div><span style="font-size: 19px;"><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>3</b></span></font></b><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>.增加入口文件</b></span></font></b></span></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="display:inline;list-style:none;"><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 12pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">简述入口文件的工作</span></font></div></li></ol></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">入口文件本质要做的事情有很多：基本设定，数据接收判定，找到控制器等等</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">基于人类的思维逻辑：“大门”通常不做任何事情，只要能够通过即可，</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">index.php</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">也不要做什么事情；要做的就是让别人访问，“唯一”要做的事情就是引导工作，引导到一个正确的位置（安检）</span></font></div></div></div><div align="justify" style="min-height: 13pt;"><div><span style="font-size: 19px;"><font color="#010101" face="宋体"><span style="font-family: ����;"><b>4.</b></span></font><b><font color="#010101" face="宋体"><span style="font-family: ����; color: rgb(1, 1, 1); font-weight: bold; font-style: normal;"><b>增加初始化类</b></span></font></b></span></div></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="display:inline;list-style:none;"><ol><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">初始化类：/Core/App.class.php</span></font></li></ol></li></ol></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><ol><li>控制项目采用正确的编码被浏览器解析</li><li>通过PHP的函数修改当前配置文件（临时修改）</li><li>项目开发中，会使用很多文件包含，相对路径包含不够安全，会采用绝对路径，通常会在初始化的时候将对应的需要包含文件的文件夹都设置成绝对路径常量</li><li>解析URL（获取数据）：没有数据，无法实现找到控制器</li><li>分发控制器：通过了解用户需求（平台，控制器，方法），进入到对应的控制器</li></ol><div>重点：一个单独的功能应该不与其他的功能重复（降低耦合性），单独功能在类中，应该对应一个单独的方法</div></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">ini_set()通过程序，控制PHP配置</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">ini_set(‘display_errors’,’1’);     更改配置文件，允许程序显示错误</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">ini_set(‘error_reporting’,’E_ALL’);     更改配置文件，让程序显示所有错误</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">定义和用法：error_reporting() 设置 PHP 的报错级别并返回当前级别。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">函数语法：error_reporting(report_level)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">如果参数 level 未指定，当前报错级别将被返回。下面几项是 level 可能的值：值 常量 描述</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">1 E_ERROR 致命的运行错误。错误无法恢复，暂停执行脚本。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">2 E_WARNING 运行时警告(非致命性错误)。非致命的运行错误，脚本执行不会停止。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">4 E_PARSE 编译时解析错误。解析错误只由分析器产生。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">8 E_NOTICE 运行时提醒(这些经常是你代码中的bug引起的，也可能是有意的行为造成的。)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">16 E_CORE_ERROR PHP启动时初始化过程中的致命错误。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">32 E_CORE_WARNING PHP启动时初始化过程中的警告(非致命性错)。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">64 E_COMPILE_ERROR 编译时致命性错。这就像由Zend脚本引擎生成了一个E_ERROR。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">128 E_COMPILE_WARNING 编译时警告(非致命性错)。这就像由Zend脚本引擎生成了一个E_WARNING警告。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">256 E_USER_ERROR 用户自定义的错误消息。这就像由使用PHP函数trigger_error（程序员设置E_ERROR）</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">512 E_USER_WARNING 用户自定义的警告消息。这就像由使用PHP函数trigger_error（程序员设定的一个E_WARNING警告）</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">1024 E_USER_NOTICE 用户自定义的提醒消息。这就像一个由使用PHP函数trigger_error（程序员一个E_NOTICE集）</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">2048 E_STRICT 编码标准化警告。允许PHP建议如何修改代码以确保最佳的互操作性向前兼容性。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">4096 E_RECOVERABLE_ERROR 开捕致命错误。这就像一个E_ERROR，但可以通过用户定义的处理捕获（又见set_error_handler（））</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">8191 E_ALL 所有的错误和警告(不包括 E_STRICT) (E_STRICT will be part of E_ALL as of PHP 6.0)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">例子：</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">任意数目的以上选项都可以用“或”来连接(用 OR 或 |)，这样可以报告所有需要的各级别错误。</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">例如，下面的代码关闭了用户自定义的错误和警告，执行了某些操作，然后恢复到原始的报错级别：</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">&lt;?php</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">//禁用错误报告</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">error_reporting(0);</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">//报告运行时错误</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">error_reporting(E_ERROR | E_WARNING | E_PARSE);</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">//报告所有错误</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">error_reporting(E_ALL);</span></span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">?&gt;</span></span></span></div></div></div></div><div align="justify" style="min-height: 13pt;"><div><b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>5、增加控制器</b></span></font></b>APP\Home\Controller\Index.class.php</div><div>5.1增加前台首页控制器</div><div>使用命名空间</div><div>命名空间：namespace，一种用来将内存逻辑划分的功能，用来区分同名的类，函数和常量（必须是使用const关键自定义的）</div><div>5.2 增加控制器类</div><div>5.3修改初始化类分发机制：因为控制器都被使用了命名空间，也就是说都有了目录，但是APP文件中类所在的空间是全局空间（磁盘根目录），不带路径是无法访问的。</div><div>5.4增加控制器方法</div><div><font color="#010101" face="等线"><span style="font-family: ����; color: rgb(1, 1, 1); font-style: normal;"><span style="font-size: 16pt;"><b>6、增加视图</b><span style="font-size: 16px;">在</span></span></span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">APP\Home\Controller\Index.class.php引入</span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">APP\Home\</span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">View\Index\index.html</span></font></div><div>6.1增加视图分层：将视图按照所属控制器进行分层，就是在视图View文件夹下，再次建立相对应的控制器名称的文件夹，然后将对应的视图放到不同的文件夹中。</div><div>6.2控制器引入视图：控制器在获取到数据需要视图进行显示的时候，将对应的视图引入进来（include）</div><div><b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>7、增加</b></span></font></b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>模型</b></span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">APP\Model\User.class.php</span></font></div><div>7.1增加模型类：模型类的存在，每个数据表都有一个对应的模型类来针对该表进行增删改查的操作。</div><div>7.2搭建数据库：搭建数据库</div><div>7.3 增加模型操作方法：往往不是所有的模型都一定需要对应的增删改查方法，要看具体的业务</div><div>7.4 控制器调用模型：控制器是队长，负责支配模型和视图</div><div>7.5视图中显示数据：因为视图是被控制器直接引用，所以视图可以访问控制器对应的方法内的所有数据。</div><div><b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>8、</b></span></font></b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>增加配置文件</b></span></font><font color="#010101" face="����" size="2"><span style="font-size:10pt">Config\config.php</span></font></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;margin-left:1px;"><div align="justify" style="min-height: 13pt;"><b><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">8.1配置文件的意义</span></font></b></div></li></ol></div><div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt">配置文件：在项目外单独</span></font><font color="#FF0000" face="等线" size="2"><span style="font-size:10pt">增加一个文件</span></font><font color="#010101" face="等线" size="2"><span style="font-size:10pt">，用来记录少数会经常变化，但是影响有比较多的数据信息。然后在项目中，只需要引入对应的配置文件，相关人员只需要在配置文件中修改对应的数据，即可完成对项目应用的修改。</span></font></div></div><ol start="2" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">8.2增加配置文件</span></font></li></ol><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt">配置文件的形式：单独一个文件，文件中直接返回一个数组，数组内使用关联数组元素把数据维护起来</span></font></div></div></div><div>8.3引入配置文件并使用，在Core\App.class.php和APP\Model\User.class.php中引入</div><div>配置文件是每个模型都会使用到：在入口安全文件中引入配置文件</div><div>在需要使用配置文件的地方（模型）将配置文件引入并使用</div><div><b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>9、</b></span></font></b><b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal">总结MVC自定义框架</span></font></b></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt">用户访问index.php（携带参数）-》/Core/App.class.php（初始化字符集，设定目录常量，控制系统错误，</span></font><font color="#FF0000" face="等线" size="2"><span style="font-size:10pt">引入配置文件</span></font><font color="#010101" face="等线" size="2"><span style="font-size:10pt">，获取URL数据，分发到控制器）-》进入到控制（分层进入，调用模型获取数据，调用视图显示数据）</span></font></div></div><div><img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [7].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><br/></div><div align="justify" style="font-weight: bold; font-size: 20px;"><font color="#010101" face="等线 Light" size="4"><span style="font-size:16pt"><b>四、  优化MVC自定义框架</b></span></font></div><div><span style="font-size: 19px;"><b>1、优化命名规则</b></span></div><div>1.1优化控制器名字，给所有的控制器都增加一个Controller的后缀，指在控制器本名之后增加Controller</div><div>1.2优化模型名字，给所有的模型增加一个Model后缀</div><div><b><span style="font-size: 19px;">2、实现自动加载</span></b></div><div>2.1增加自动加载机制</div><div>    2.1.1需要自定义方法：加载指定文件夹中的类</div><div>    加载核心类文件，加载控制器文件，加载模型文件，加载插件文件</div><div>     2.1.2将自定义方法注册到自动加载器</div><div>     将自定义方法注册到自动加载：spl_autoload_register()</div><div>2.2修改分发机制</div><div>2.3增加命名空间之后，系统在进行自动加载的时候，对应的类名都是带着空间：如果想要进行好的访问，那么必须把空间给想办法去掉。</div><div><b><span style="font-size: 19px;">3、增加公共控制器</span></b></div><div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt">原因：大部分控制器都有可能会有一些重复的操作，例如跳转（成功或者失败），意味着每个控制器都需要写同样的内容，这就为了MVC设计思想——实现代码重复利用</span></font></div></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">解决方案：</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">想办法将重复代码收集起来，放到一起：形成一个公共代码类（针对控制器）</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">想办法让每个控制器都可以去使用重复代码：让每个业务控制器都继承公共控制器即可</span></font></div></li></ol></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt">3.1为公共控制器增加命名空间：都属于核心类，</span></font><font color="#010101" face="等线" size="2"><span style="font-size:10pt">让每个控制器都继承自己平台的公共控制器</span></font></div></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">3.2增加基础控制器：前后台的公共控制器还有可能有代码的重用的问题，就应该提升一个更基础的公共控制，将所有的公共的代码写入到公共控制器中，</span></font><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">让所有的公共控制器都继承该基础控制器：HomeController和BackController</span></font></div></li></ol></div><div><ol style="list-style-type: none;margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">3.3增加公共跳转方法：前后台都需要跳转方法</span></font></li><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">3.3.1操作成功跳转</span></font></li><li style="list-style-type: none;"><font size="2"><span style="font-size: 10pt; font-weight: normal; font-style: normal;"><span style="color: rgb(1, 1, 1);"><span style="font-family: ����;">3.3.</span></span>2</span></font><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">操作失败跳转</span></font></li><li style="list-style-type: none;"><b><font color="#010101" face="等线" size="4"><span style="font-size:16pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>4、增加公共模型</b></span></font></b><span style="color: rgb(1, 1, 1);"><span style="font-family: ����;"><span style="font-size: 16pt;"><b><br/></b></span></span></span></li></ol></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">4.1增加公共模型：指的处理一些相似的功能（业务数据）</span></font></li></ol><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="等线" size="2"><span style="font-size:10pt">在核心文件中增加一个公共模型类</span></font></div></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">PHP中的继承是双向继承：子类可以访问父类的属性或者方法，同样在父类中也可以实现访问子类的属性或者方法。</span></font></div></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="list-style-type: none;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">4.2增加DAO</span></font></li></ol><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">DAO：Data Access Object，数据接收对象，是一种专门负责数据库交互的功能，是从MVC模型中抽离出来的。</span></font></div></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="����" size="2"><span style="font-size:10pt">DAO的基本功能：连接认证，负责数据库的基本SQL指令执行（读和写），SQL指令语法判断：只允许用户与数据库最多建立一个连接（单例模式）</span></font></div></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">创建DAO类：放在核心类中</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">单例模式：三私一公</span></font></div><div align="justify" style="margin-left:6mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">私有化构造方法：防止类被无限实例化</span></font></div><div align="justify" style="margin-left:6mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">私有化克隆方法：防止对象被克隆</span></font></div><div align="justify" style="margin-left:6mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">私有化静态变量：用来保存产生的对象</span></font></div><div align="justify" style="margin-left:6mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">公有化静态方法：用来产生对象</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">为了将错误能够正确的返回给DAO调用者：需要增加一个静态属性记录错误信息</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">细节考虑：当前DAO类是在自定义的Core目录下，如果在DAO内直接使用PDO或者PDOException类那么系统只会在Core目录下寻找：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="等线" size="2"><span style="font-size:10pt">解决方案：要么使用完全限定名称访问；要么引入两个类。</span></font></div></li></ol></div></div><div align="justify" style="min-height: 13pt;"><div><span style="font-size: 19px;"><b>5、引入Smarty</b></span></div><div>5.1使用Smarty</div><div>获取Smarty，将Smarty压缩包解压，取出里面的libs文件夹到Vendor下，并改名为Smarty</div><div>5.2将Smarty引入到公共控制器</div><div>控制器都需要用到Smarty，Smarty应该放到基础控制器中引入：将Smarty的应用在构造方法中体现。</div><div>简单配置Smarty：模板路径，编译文件，缓存文件，定界符</div><div>在子控制器中应用Smarty</div><div>在模板中使用Smarty标签解析数据</div><div>5.3优化Smarty的使用：将Smarty的assign和display方法“重写”，使得可以在子控制器中直接使用assign和display方法，而不需要经过Smarty对象</div><div>基础控制器中增加assign和display方法，“封装”Smarty的assign和display方法</div><div>在子控制器中直接使用assign和display方法即可</div><div><br/></div><div><b><span style="font-size: 19px;">6、MVC自定义框架总结</span></b></div><div><img src="PHP-MVC框架-day24-26（本节重点看MVC目录结构，入口文件设置和初始化类 ）_files/Image [8].png" type="image/png" style="height: auto;"/></div><div><br/></div><div align="justify" style="font-weight: bold; font-size: 20px;"><font color="#010101" face="等线 Light" size="4"><span style="font-size:16pt"><b>五、  简单应用MVC自定义框架</b></span></font></div><div>简单实现后台登陆功能</div><ol><li>当用户打开后台链接看到的第一个界面应该是一个登录表单</li><li> 增加一个后台权限控制器</li><li>增加一个index方法</li><li>调用登录表单模板：Smarty调用</li><li>将视图放到对应的位置：login.html放到Back\View\Index\login.html</li><li> 登录表单是由前端用户提供：不知道表单提交对象，需要确定表单提交对象：修改表单</li><li> 增加check方法，进行用户信息验证：接收数据，验证数据合法性，验证有效性（数据库存在），返回结果（进入首页）</li></ol><div><div align="left" style="min-height: 15pt;"><b><span style="font-size: 19px;"><font color="#010101">总结：使用框架流程</font></span></b></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="list-style-type: none;"><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="list-style-type: none;"><ol><li>创建控制器（有URL可以访问）</li><li>增加方法<br/><ol><li>判断业务逻辑</li><li>调用模型获取数据</li><li>加载模板（将模板放到View对应的控制器下）</li></ol></li><li>在模型中增加方法获取数据（数据操作）：如果出现多次模型中有同样的方法，应该在公共模型中增加（控制器同理）</li><li>在模板中显示数据</li></ol></li></ol></li></ol></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div></div></div><hr/><div align="justify" style="min-height: 159pt;"><div align="justify" style="min-height: 13pt;"><div><b><br/></b></div><div><b>-------------------------------<span style="font-size: 21px;">MVC入口文件设置和初始化类</span>-------------------------------------</b></div></div><div align="justify" style="min-height: 13pt;"><div><span style="color: rgb(255, 0, 0);"><b>一、项目入口</b></span></div><div><span style="color: rgb(0, 0, 0); font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/index.php入口文件</b></span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><b>    //项目入口</b></div><div><b>    //定义项目入口常量（安全）</b></div><div><b>    define('ACCESS', TRUE);</b></div><div><b>    //项目入口不需做事情，引导到入口安检处：Core/App.class.php</b></div><div><b>    // echo &quot;项目入口&quot;;</b></div><div><b>    include_once 'Core/App.class.php';//引入核心文件</b></div><div><b>    //运行起来</b></div><div><b>    App::run();//为了效率尽量静态化（类直接访问，无需产生对象）App::run()</b></div></div><div align="justify" style="min-height: 13pt;"><div><b>初始化类五大步骤：</b></div><div><b>1、增加编码设定方法</b></div></div><div align="justify" style="min-height: 13pt;"><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>2、增加路径常量设定方法：将凡是需要包含文件的文件夹都设置一遍常量</b></span></font></b></div><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>3、增加系统错误设定方法：通过PHP提供的一个系统函数ini_set(配置项，值)</b></span></font></b></div><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>4、增加URL解析方法：判断用户要干嘛</b></span></font></b></div><div><b><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><b>5、增加分发方法：根据用户的需求找到对应的控制器（平台）以及方法</b></span></font></b></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><b>其中增加URL解析方法：判断用户要干嘛</b></div><div><b>关于用户请求有三个参数：p，c和a</b></div><div><b>P：platform，平台，前台还是后台</b></div><div><b>C：Controller，控制器</b></div><div><b>A：Action，动作，具体请求控制器的什么功能</b></div></div><div><b><span style="color: rgb(1, 1, 1);">二、初始化类</span></b></div></div><div><span style="color: rgb(0, 0, 0); font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/Core/App.class.php</b></span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>&lt;?php</div><div>    //项目初始化类</div><div>    //判断用户是否正常访问：判断是否存在入口常量：ACCESS</div><div>    if (!defined('ACCESS')) {</div><div>        //不是通过入口进来：index.php，不允许访问，引导客户正常访问：访问index.php</div><div>        header('Location:../index.php');</div><div>    }</div><div>    //定义类：类名与文件同名（建议区分大小写）</div><div>    class App{</div><div>        //面向对象：应该尽可能的增加对成员的控制（能私有尽量私有）</div><div>        //增加方法：初始化显示编码</div><div>        private static function iniCode(){</div><div>            //设置浏览器解析编码为utf-8</div><div>            header('Content-type:text/html;Charset=utf-8');</div><div>        }</div><div>        //增加方法：初始化目录常量</div><div>        private static function iniDir(){</div><div>            //获取绝对路径：__DIR__/__FILE__</div><div>            define('ROOT',str_replace('Core','',str_replace('\\', '/', __DIR__)));</div><div>            define('APP',ROOT.'App/');//E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/App/</div><div>            define('CONFIG',ROOT.'Conf/');</div><div>            define('CORE',ROOT.'Core/');</div><div>            define('PUBLIC',ROOT.'Public/');</div><div>            define('VENDOR',ROOT.'Vendor/');</div><div>        }</div><div>        //设置系统错误控制：</div><div>        private static function iniError(){</div><div>            //设置是否显示错误，以及显示错误级别</div><div>            @ini_set('display_errors',1);//更改配置文件，允许程序显示错误,这里的1代表on</div><div>            @ini_set('error_reporting',E_ALL);</div><div>        }</div><div><span style="color: rgb(255, 0, 0);"><b>        //引入配置文件</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>        private static function iniConfig(){</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            //为了保证配置文件全局可用使用$global</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            global $config;</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            //加载并接收配置文件</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            $config=include_once CONFIG.'config.php';</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>        }</b></span></div><div>        //定义自动加载机制:定义各种可能需要加载的文件</div><div>        private static function loadCore($className){</div><div>            //加载核心文件</div><div>            //因为$className是带着空间的，所以需要去掉空间</div><div>            $className=basename($className);</div><div>            //拼凑路径</div><div>            $path=CORE.$className.'.class.php';</div><div>            if (is_file($path)){</div><div>                include_once $path ;</div><div>            }</div><div>        }</div><div>        private static function loadController($className){</div><div>            //加载控制器文件 IndexController</div><div>            $className=basename($className);</div><div>            //拼凑路径</div><div>            $path=APP.PLAT.'/Controller/'.$className.'.class.php';</div><div>            if (is_file($path)){</div><div>                include_once $path ;</div><div>            }</div><div>        }</div><div>        private static function loadModel($className){</div><div>            //加载模型文件           </div><div>            $className=basename($className);</div><div>            $path=APP.'Model/'.$className.'.class.php';</div><div>            if (is_file($path)){</div><div>                include_once $path ;</div><div>            }</div><div>        }</div><div>        private static function loadVendor($className){</div><div>            //加载插件文件           </div><div>            $className=basename($className);</div><div>            //拼凑路径</div><div>            $path=VENDOR.$className.'.class.php';</div><div>            if (is_file($path)){</div><div>                include_once $path ;</div><div>            }</div><div>        }</div><div><span style="color: rgb(255, 0, 0);"><b>        //将自定义加载方法注册到自动加载器</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>        //？？1为什么要用这数组array('self','loadCore')</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>        //答：这里是注册这里的函数loadCore……</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>        private static function iniAutoload(){</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            spl_autoload_register(array('self','loadCore'));</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            spl_autoload_register(array('self','loadController'));</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            spl_autoload_register(array('self','loadModel'));</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>            spl_autoload_register(array('self','loadVendor'));</b></span></div><div><span style="color: rgb(255, 0, 0);"><b>        }</b></span></div><div>        //解析URL:判断用户的请求:p:platform,c:controller,a:action</div><div>        public static function iniURL(){</div><div>            //从URL中获取三个参数：因为提交的方式有get和post所以用request</div><div>            $p=isset($_REQUEST['p'])?$_REQUEST['p']:'Home';</div><div>            $c=isset($_REQUEST['c'])?$_REQUEST['c']:'Index';</div><div>            $a=isset($_REQUEST['a'])?$_REQUEST['a']:'index';</div><div>            //保证平台和控制器首字母大写：ucfirst,其他字符小写：strtolower</div><div>            $p=ucfirst(strtolower($p));</div><div>            $c=ucfirst(strtolower($c));</div><div>            //因为普通变量不能在其他地方使用,所以将三个变量设置成常量。</div><div>            define('PLAT',$p);</div><div>            define('CONTROLLER',$c);</div><div>            define('ACTION',$a);</div><div>        }</div><div>        //URL分发控制器:根据用户的请求找到对应的平台控制器和方法</div><div>        public static function iniDispatch(){</div><div>            //访问控制器类：找到类（加载），找到对应平台下的控制器</div><div>            // include_once APP.PLAT.'/Controller/'.CONTROLLER.'Controller.class.php';</div><div>            //因为Controller里面是个类，所以我们需要实例化这个类，但是new不能直接new常量</div><div>            $c=CONTROLLER<span style="color: rgb(255, 0, 0);"><b>.'Controller'</b></span>;//如IndexController</div><div>            $a=ACTION;</div><div>            //构造命名空间路径</div><div>          <span style="color: rgb(255, 0, 0);"><b>  $c=PLAT.&quot;\\Controller\\{$c}&quot;;</b></span></div><div>            $c=new $c;//new Index//当前所属空间是全局空间，并调用自动加载的4个注册方法</div><div>            //进入对应的方法</div><div>            $c-&gt;$a();</div><div>            // $c-&gt;redirectTest();</div><div>            // $c-&gt;redirectError();</div><div>        }</div><div>        //入口方法</div><div>        public static function run(){</div><div>            // 实现编码显示</div><div>            self::iniCode();</div><div>            // 初始化目录常量</div><div>            self::iniDir();</div><div>            // 初始化错误控制</div><div>            self::iniError();</div><div>            // 初始化配置文件</div><div>            self::iniConfig();</div><div><b>            //实现自动加载</b></div><div><b>            self::iniAutoload();</b></div><div>            // 初始化URL</div><div>            self::iniURL();</div><div>            // 实现路由分发</div><div>            self::iniDispatch();</div><div>        }</div><div>        //注意：iniAutoload()里面用到了iniURL()里面定义的常量，按常理说应该放在iniURL()之后。但是自动加载机制是在使用类的时候触发，也就是在执行iniDispatch()时候才调用自动加载，而这时iniURL()已经执行，内存中已经有iniURL()定义的常量。所以说，iniAutoload()方法放在iniURL()前后都可以，但必须放在iniDispatch()之前。</div><div>    }</div><div>?&gt;</div></div><div><b>一个默认</b><b>平台控制器和方法</b> <span style="font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>index.class.php文件</b></span></div><div><span style="color: rgb(0, 0, 0); font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><b>E:/CZwj/wdc/PHPlianxi/Mvcs/Icframe/App/Home/Controller/index.class.php</b></span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><b>//后台控制器</b></div><div><b>class Index{</b></div><div><b>    //默认方法</b></div><div><b>    public function index(){</b></div><div><b>        echo &quot;aaa&quot;;</b></div><div><b>    }</b></div><div><b>}</b></div></div><div>aaa</div></div></div><hr/><div align="justify" style="min-height: 159pt;"><div align="justify" style="min-height: 13pt;"><div>aaa</div><div><span style="font-family: Simsun;">？？为什么有两个输出？，注释</span><b>$c-&gt;$a();后仍有输出aaa</b></div><div><b>Index类名和方法名尽量不要同名，方法名不区分大小写，否则会执行两次。</b></div><div><span style="color: rgb(255, 0, 0);"><b>IndexController.class.php</b></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><b>&lt;?php</b></div><div><b>//前台首页控制器</b></div><div><b><br/></b></div><div><b>//增加命名空间：平台\MVC角色</b></div><div><span style="color: rgb(255, 0, 0);"><b>namespace Home\Controller;</b></span></div><div><b>//引入公共控制器</b></div><div><span style="color: rgb(255, 0, 0);"><b>use \Core\HomeController;</b></span></div><div><b>//首页控制器类</b></div><div><b>class <span style="color: rgb(255, 0, 0);">IndexController</span> extends HomeController{</b></div><div><b>    //默认方法</b></div><div><b>    public function index(){</b></div><div><b>        echo &quot;欢迎使用ICFrame自定义框架！&quot;;</b></div><div><b>        <span style="color: rgb(255, 0, 0);">//调用模型获取数据</span></b></div><div><b>      <span style="color: rgb(255, 0, 0);">  include_once APP.&quot;Model/UserModel.class.php&quot;;</span></b></div><div><b>        <span style="color: rgb(255, 0, 0);">$m=new \Model\UserModel();</span></b></div><div><span style="color: rgb(255, 0, 0);"><b>        $users=$m-&gt;getAllUser();</b></span></div><div><b>        // var_dump($users);</b></div><div><b>        <span style="color: rgb(255, 0, 0);">// 引入视图</span></b></div><div><span style="color: rgb(255, 0, 0);"><b>        include_once APP.PLAT.'/View/'.CONTROLLER.'/index.html';</b></span></div><div><b>    }</b></div><div><b>    public function redirectTest(){</b></div><div><b>        $this-&gt;success('Home','Index','index','欢迎进入首页！',3);</b></div><div><b>    }</b></div><div><b>    public function redirectError(){</b></div><div><b>        $this-&gt;error('操作失败','index');</b></div><div><b>    }</b></div><div><b>}</b></div><div><b>?&gt;</b></div></div><div><b>UserModel.class.php</b></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;?php</div><div>    //模型</div><div>    //引入命名空间</div><div>    namespace Model;</div><div>    //创建模型类</div><div>    class UserModel{</div><div>        public function getAllUser(){</div><div>            //引入配置文件</div><div>            global $config;</div><div>            @$con=mysql_connect($config['mysql']['host'].':'.$config['mysql']['port'],$config['mysql']['user'],$config['mysql']['pass']);</div><div>            mysql_query('set names utf8');</div><div>            mysql_query('use icframe');</div><div>            $sql=&quot;select * from ic_user&quot;;</div><div>            $res=mysql_query($sql);</div><div>            $list=array();</div><div>            while ($row=mysql_fetch_assoc($res)){</div><div>                $list[]=$row;</div><div>            }</div><div>            return $list;</div><div>        }</div><div>    }</div><div>?&gt;</div></div><div><b>BaseController.class.php</b></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;?php</div><div>    //基础公共控制器</div><div>    //命名空间</div><div>    namespace Core;</div><div>    //控制器类</div><div>    class BaseController{</div><div>            protected function success($p,$c,$a,$msg,$time=1){</div><div>                    // header(&quot;refresh:{$time};url=index.php?p={$p}&amp;c={$c}&amp;a=$a&quot;);</div><div>                    // echo $a;</div><div>                    // exit;</div><div>                include_once APP.PLAT.'/View/Public/success.html';</div><div>                exit;</div><div>            }</div><div>            protected function error($msg,$a,$c='',$p='',$time=3){</div><div>                // header(&quot;refresh:{$time};url=index.php?p={$p}&amp;c={$c}&amp;a=$a&quot;);</div><div>                // echo $msg;</div><div>                // exit;</div><div>                $c=empty($c)?CONTROLLER:$c;</div><div>                $p=empty($p)?PLAT:$p;</div><div>                include_once APP.PLAT.'/View/Public/error.html';</div><div>                exit;</div><div>            }</div><div>    }</div><div>?&gt;</div></div><div><span style="font-size: 21px;"><b>MVC大致流程：理清思路</b></span></div><div>项目入口index.php<b><span style="color: rgb(255, 0, 0);">---》</span>Core/App.class.php</b>--》run()<span style="color: rgb(255, 0, 0);"><b>---》</b></span>iniCode()，iniDir()，iniError()，iniConfig()<span style="color: rgb(255, 0, 0);">---》</span><b>iniAutoload()：将loadCore，loadController，loadModel，loadVendor注册自动加载函数<span style="color: rgb(255, 0, 0);">---》</span></b>iniURL()获取相应参数<b><span style="color: rgb(255, 0, 0);">---》</span>iniDispatch()</b>使用参数实例化并进入对应方法<b><span style="color: rgb(255, 0, 0);">---》</span>IndexController.class.php<span style="color: rgb(255, 0, 0);">---》</span></b>getAllUser()获取数据<span style="color: rgb(255, 0, 0);"><b>---》</b></span>index.html显示视图</div></div></div></div></div></div></div></div></div></span>
</div></body></html> 