<html>
<head>
  <title>编辑文件vim 文件名 //打开指定文件(有则打开无则新建)，vim +n 文件名，vim +/string 文件名</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2199"/>
<h1>编辑文件vim 文件名 //打开指定文件(有则打开无则新建)，vim +n 文件名，vim +/string 文件名</h1>

<div>
<span><div><b>编辑文件</b>vim 文件名 //打开指定文件(有则打开无则新建)，vim +n 文件名，vim +/string 文件名</div><div><b>退出</b>：q<b>退出编辑</b>,:q!强制退出，:x或:wq保存退出，区别:x只在文件修改了才会改变文件最后编辑时间，但是<b>注意不能写成X</b>，会导致文件加密</div><div>Linux中<b>vim3种模式</b>：</div><div><b>命令模式</b>---英文【:】--》---《--esc两下或删除末行命令---- <b>末行模式</b>--【i,a,o】---》---《---【esc】---<b>编辑模式</b></div><div><b>保存</b>:w/:w 文件名     //保存/另存</div><div><b>查找</b>:【/string 】<b>查找并高亮</b>string内容【 n/N】 向前切换搜索结果/向后切换</div><div><b>替换</b><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">①</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">:s/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需要替换的字符</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">替换成的字符---替换当前行首字</span></font><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">②</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">:s/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需要替换的字符</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">替换成的字符</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">/g</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">---替换当前行全部</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">③</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">:%s/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需要替换的字符</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">替换成的字符</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">---替换当前行至文尾部首字</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">④</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">:%s/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需要替换的字符</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">/</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">替换成的字符</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">/g</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">---替换当前行至文尾部全部</span></font></div><div><b>光标移动</b></div><div>【G】文档末行行头,【gg】首行首位，上下移n行【数字↑/↓】,<span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">指定行：</span></span><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">【数字G】,</span></span><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">【数字gg】,</span></span><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">【:数字】</span></span></div><div><b><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">删除</span></span></b><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">【dd】,</span></span><span style="color: rgb(1, 1, 1);"><span style="font-family: 宋体;">【数字dd】,</span><span style="font-family: 宋体;">【dd】</span></span>,<span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">【D数字】大D删除留空</span></span></div><div><b><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">复制</span></span></b><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);">【yy】,</span></span><span style="color: rgb(1, 1, 1);"><span style="font-family: 宋体;">【数字yy】,</span></span><span style="color: rgb(1, 1, 1);"><span style="font-family: 宋体;">【yG】复制当前行至文尾</span></span></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><b>粘贴【</b>p】，</span></span><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">进入编辑模式：按下键盘上的【</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">i】</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">insert</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）键或者【</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">a】</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">after insert</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）键。</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">退出编辑模式：按下</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">esc</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">键。</span></font></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">重做（<b>撤销</b>）</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b><i>输入【</i></b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b><i>:</i></b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b><i>数字</i></b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b><i>u</i></b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b><i>】数字表示撤销的步骤数，或者输入【</i></b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b><i>:u</i></b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b><i>】表示撤销前一步</i></b></span></font></div></div><div><b>显示行号</b> set nu,不显示set nonu</div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">默认设置显示行号，Vim</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的配置文件位于每个用户的家目录中，文件名叫做</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">.vimrc</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><i>可能不存在，如果不存在则需要自己创建</i></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）。创建.vimrc然后编辑set nu保存退出</span></font></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>别名</b>机制，</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需要设置别名文件</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">.bashrc</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">（位于用户的家目录中）。修改后</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">重新登录</span></font></div><div align="justify" style="min-height: 14pt;"><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">去掉<b>异常</b>关闭的提示，则需要删除交换文件，交换文件名一般都是【</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">.</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">原始文件名</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">.swp</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">】，只需要删除即可</span></font></div></div></div></div></div></div></div></div></div></div></div><div><b>rpm软件管理</b>工具</div><div>        <b>查找</b>:rpm –qa | grep 关键词 </div><div>        <b>卸载</b>:rpm –e  软件名  [--nodeps 强制删除关联]</div><div>        <b>安装</b>:rpm –ivh 软件名 
<div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">①先将</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">iso</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">光盘文件插入到虚拟机的光驱中</span></font><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">②打开光盘中的</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">Packages</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">目录，</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">通过</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ls</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">和</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">grep</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的配合，过滤出火狐浏览器的名称：ls|grep firefox</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">③在</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">Packages</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">目录打开终端</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">rpm</span></font><font color="#010101" size="2"><span style="font-size:10pt"><span style="font-family: 宋体;">命令进行安装，也可以：</span>rpm -ivh `ls|grep firefox`</span></font></div></div></div></div></div></div><div><b>linux运行模式</b>,<font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b><i>文件的位置位于</i></b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b><i>/etc/inittab</i></b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">。</span></font></div><div>        0:停机</div><div>        1:单用户模式</div><div>        2:多用户模式，没有 NFS 支持。</div><div>        3:完整的多用户模式</div><div>        4:未定义模式，一般不用，在一些特殊情况下可以用它来做一些事情。</div><div>        5:X11 控制台，登陆后进入图形 GUI 模式</div><div>         6:重启。 </div><div><b>用户管理</b>vim /etc/passwd，参数-d指定用户主目录，-g指定组，-u指定用户ID号</div><div>        1添加用户:useradd</div><div>        2添加密码;passwd------passwd参数：-S大写查看密码状态，-d删，-u解锁用户，-l锁定用户</div><div align="left" style="min-height: 15pt;"><div><span style="font-size:11pt"><span style="font-family: SimSun;">          </span>Passwd–l user   锁定用户user1</span></div></div><div>        3编辑用户:usermod<font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>修改用户名：</b></span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>usermod</b></span> <span style="font-size:10pt; background:#ffff00"><b>-l</b></span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>新的用户名</b></span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>之前的用户名</b></span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>         修改用户组id：</b></span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>usermod</b></span> <span style="font-size:10pt; background:#ffff00"><b>-g</b></span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>用户组</b></span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>id</b></span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>之前的用户名</b></span></font></div></div><div>        4删除用户:userdel，参数<font face="Calibri"><span style="font-size:12pt"> </span></font><font face="Calibri" size="2"><span style="font-size:10pt"><b>-r</b></span></font> <font face="SimSun" size="2"><span style="font-size:10pt">删除用户的同时也删除它的主目录</span></font></div><div><b>用户组管理</b>vim /etc/group <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>注意：普通用户是</b></span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>没有用户和用户组的管理权限的。只有超级用户才有这个权限</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">。</span></font></div><div>        1添加用户组:groupadd，参数-g或-G指定组id， groupadd –g 600 test2 添加名为test2的组且gid为600</div><div>        2编辑用户组:groupmod，参数-g或-n<font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>修改用户组的名字，</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt; background:#ffff00"><b>groupmod -n</b></span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>新的组名</b></span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt; background:#ffff00"><b>旧的组名</b></span></font></div><div>        3删除用户组:groupdel,删除用户组前需移除组内用户</div><div><b>文件权限</b><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ls -l查看         -rwxrwxrwx</span></font></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>l 表示软连接文件link，-文件</div><div>          -          rwx          rwx          ---</div><div>档案类型，d为目录，档案拥有者，档案所属组拥有者，其他人对此档案权限</div></div><div> <b>修改权限</b>:chmod<font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>语法：</b></span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>chmod</b></span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>权限信息</b></span></font> <font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>[-R]</b></span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>文件或者文件夹名</b></span></font></div><div><b>权限含义</b>:r--可读(4)  w--可写(2) x--可执行(1),-R递归赋予权限</div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>①将权限设置成某个状态</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">#chmod u=rwx,g=rwx,o=rwx</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">文件</span></font></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>②给某个部分添加权限</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">#chmod u+wx</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">文件名</span></font><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>③给某个部分删除权限</b></span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">#chmod g-wx   </span></font></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">     通过数字形式来设置权限：如</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><b>chmod 777 文件名</b>，</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">4</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：表示读权限，</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">2</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：表示写权限，</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">1</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：表示执行权限</span></font></div><div align="justify" style="min-height: 14pt;"><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>在设置权限的时候需要注意的是，读权限是最基本的权限，如果一个文件或者文件夹有写权限，则其必须要有读权限，</b></span></font></div><div style="margin-left:40px;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>也就是说以后不要出现在设置权限的时候看到类似于“</b></span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>-wx</b></span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>”、“</b></span></font><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt"><b>-w-</b></span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt"><b>”的奇葩权限</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">。chmod -R 777 qrcode</span></font></div></div></div></div></div></div></div></div><div align="left" style="min-height: 13pt;"><div align="left" style="min-height: 12pt;"><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"> drwxr-xr-x    2          root     root          4096           12-01 20:52           bin</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">硬链接数或目录子目录数      所有者     所属组          文件大小      文件创建或最后修改的时间  文件</span></span></span></div></div></div><div><font size="2"><span style="font-size:10pt"><b>文件目录权限总结:</b></span></font></div></div><div align="left" style="min-height: 13pt;"><div><b><font size="2"><span style="font-size:10pt">代表字符     权限     对文件的含义              </span></font> 相关命令                   <font size="2"><span style="font-size:10pt">对目录的含义                   </span></font> 相关命令</b></div></div><div align="left" style="min-height: 13pt;"><div style="margin-left:40px;"><font size="2"><span style="font-size:10pt">r    读权限     可以查看文件的内容    </span></font> cat,more,hrad,tail<font size="2"><span style="font-size:10pt">     可以列出目录中的内容          ls</span></font></div></div><div align="left" style="min-height: 13pt;margin-left:40px;"><div><font size="2"><span style="font-size:10pt">w   写权限     可以修改文件的内容   </span></font> echo,vi ,vim <font size="2"><span style="font-size:10pt">             可以在目录中创建,删除文件  </span></font>rm mkdir touch</div></div><div align="left" style="min-height: 13pt;"><div style="margin-left:40px;"><font size="2"><span style="font-size:10pt">x    执行权限     可以执行文件         </span></font> <font size="2"><span style="font-size:10pt">   </span></font>脚本命令                 <font size="2"><span style="font-size:10pt">可以进入目录                     </span></font> cd <font size="2"><span style="font-size:10pt">     </span></font></div></div><div align="left" style="min-height: 15pt;"><div><font size="2"><span style="font-size:10pt">chown nobody file <b>改变文件file 的所有者</b>为nobady</span></font></div></div><div align="left" style="min-height: 13pt;"><div><b><font size="2"><span style="font-size:10pt">chgrp[用户组][文件或目录]<span style="font-family: SimSun;"> </span></span></font></b><font face="SimSun" size="2"><span style="font-size:10pt"><b>功能描述:改变文件或目录的</b>所属组</span></font></div><div align="left" style="min-height: 12pt;"><div><span style="font-size: 19px;"><b>补充命令：</b></span></div><div align="left" style="min-height: 12pt;"><div><font color="#010101" face="Microsoft YaHei" size="1"><span style="font-size:8pt">ps -ef | grep 服务 查看服务进程</span></font></div></div><div align="left" style="min-height: 12pt;"><div><font color="#010101" face="Microsoft YaHei" size="1"><span style="font-size:8pt">cat  查看文件内容</span></font></div></div><div><b>find</b>：find 路径 查找类型 目标文件 -print     例<b><font color="#010101" face="Microsoft YaHei" size="1"><span style="font-size:8pt">find /  -name  test -print</span></font></b></div><div><b>shutdowm</b>：-h关机     -r重启     -c取消     -k提示，now或后跟单个数字如10，则10分钟后关机，完整时间则到时关机</div><div>tail -f 目标文件 -----<b>动态打印，例</b><b>tail -f  /var/log/cron或在日历里输出</b></div><div style="margin-left:40px;"><b>&gt;&gt;重定向</b>，追加写</div><div style="margin-left:40px;">&gt;重定向，覆盖写</div></div><div align="left" style="min-height: 16pt;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;min-height: 8pt; background: #fbfbfb;"><div><font color="#333333" face="Open Sans" size="5"><span style="font-size:23pt"><b>Linux Crontab</b></span></font><font color="#333333" face="宋体" size="5"><span style="font-size:23pt"><b>定时任务</b></span></font></div><div>linux内置的cron进程能帮我们实现这些需求，cron搭配shell脚本，非常复杂的指令也没有问题。</div><div style="margin-left:40px;"><b>例：crontab -e;</b></div><div style="margin-left:40px;"><b>* * * * *  echo  &quot;1234567890&quot; &gt;&gt; /home/good/abcd.txt</b></div><div style="margin-left:40px;"><b>tail -f /home/good/abcd.txt能动态显示输出</b></div><div style="margin-left:40px;"><b>tail -f  /var/log/cron或在日历里输出</b></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><div><font color="#333333" face="Open Sans"><span style="font-size:12pt"><b>cron</b></span></font><font color="#333333" face="宋体"><span style="font-size:12pt"><b>介绍，配置命令在</b></span></font><font color="#333333" face="Open Sans"><span style="font-size:12pt"><b>/var/spool/cron</b></span></font><font color="#333333" face="宋体"><span style="font-size:12pt"><b>的</b></span></font><font color="#333333" face="Open Sans"><span style="font-size:12pt"><b>root</b></span></font><font color="#333333" face="宋体"><span style="font-size:12pt"><b>（或其他用户）文件里</b></span></font></div><div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-size: 10pt; color: #333333;"><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt; font-family:Open Sans; color:#333333; font-weight:Normal; font-style:Normal; font-decoration:Normal">/var/spool/cron/</span></font> <font color="#333333" face="宋体" size="1"><span style="font-size:9pt">目录下存放的是每个用户包括</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">root</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">的</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">crontab</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">任务，每个任务以创建者的名字命名</span></font></li><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-size: 10pt; color: #333333;"><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt; font-family:Open Sans; color:#333333; font-weight:Normal; font-style:Normal; font-decoration:Normal">/etc/crontab</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">这个文件负责调度各种管理和维护任务。</span></font></li><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-size: 10pt; color: #333333;"><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt; font-family:Open Sans; color:#333333; font-weight:Normal; font-style:Normal; font-decoration:Normal">/etc/cron.d/</span></font> <font color="#333333" face="宋体" size="1"><span style="font-size:9pt">这个目录用来存放任何要执行的</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">crontab</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">文件或脚本。</span></font></li><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent: 0pt;"><font color="#333333" face="宋体" size="1"><span style="font-size:9pt; font-family:����; color:#333333; font-weight:Normal; font-style:Normal; font-decoration:Normal">我们还可以把脚本放在</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">/etc/cron.hourly</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">、</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">/etc/cron.daily</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">、</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">/etc/cron.weekly</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">、</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">/etc/cron.monthly</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">目录中，让它每小时</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">/</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">天</span></font><font color="#333333" face="Open Sans" size="1"><span style="font-size:9pt">/</span></font><font color="#333333" face="宋体" size="1"><span style="font-size:9pt">星期、月执行一次。</span></font></li></ul></div><div>crontab的使用，我们常用的命令如下：</div><div align="left" style="min-height: 12pt;"><div><b><font color="#010101" face="Microsoft YaHei" size="1"><span style="font-size:8pt">查看所有用户的定时任务  /var/spool/cron需要在此目录下</span></font></b></div></div><div>crontab[-u username]　　　　//省略用户表表示操作当前用户的crontab</div><div>-e      (编辑工作表)</div><div>-l      (列出工作表里的命令)</div><div>-r      (删除工作作)</div><div><b>crontab -e</b>进入当前用户的工作表编辑，是常见的vim界面。每行是一条命令。</div><div>crontab的命令构成为时间+动作，其时间有<b>分、时、日、月、周</b>五种，<b>操作符</b>有*，<b>/每过多少数字</b>，-从x-z，<b>，</b>散列数字</div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;min-height: 0pt; background: #f6f6f6;"><div><b><font color="#555555" face="宋体" size="2"><span style="font-size:10pt">注意时间与星期不能同时设置</span></font></b><font color="#555555" face="Helvetica" size="2"><span style="font-size:10pt">,</span></font><font color="#555555" face="宋体" size="2"><span style="font-size:10pt">例如下面就是一个错误的写法</span></font><font color="#555555" face="Helvetica" size="2"><span style="font-size:10pt">:</span></font><font color="#C7254E" face="Consolas" size="2"><span style="font-size:10pt; background:#f9f2f4">30 12 11 9 5 command，因为9月11日不一定是周五</span></font></div></div><div>实例1：* * * * * myCommand  每1分钟执行一次myCommand</div><div>实例2：3,15 * * * * myCommand  每小时的第3分钟和第15分钟执行</div><div>实例3：3,15 8-11 * * * myCommand  在每天上午8点到11点的第3分钟和第15分钟执行</div><div style="language:zh-CN;margin-top:0pt;margin-bottom:0pt; margin-left:0in;text-align:left;direction:ltr;unicode-bidi:embed;mso-line-break-override: none;word-break:normal;punctuation-wrap:hanging"><div><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">实例4：3,15</span> <span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">8-11 */2<span style="mso-spacerun:yes"> </span> *<span style="mso-spacerun:yes"> </span> *</span> <span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">myCommand</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);"><span style="mso-tab-count:1"> </span> </span> <span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">每两天</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">的上午</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">8</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">点到</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">11</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">点的第</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">3</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">分钟和第</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">15</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">分钟</span><span style="font-family: 微软雅黑; color: rgb(37, 64, 97);">执行</span></div></div><div>实例5：3,15 8-11 * * 1 myCommand    每周一上午8点到11点的第3分钟和第15分钟执行</div><div>实例6：30 21 * * * /etc/init.d/ Apache restart    每晚的21:30重启Apache</div><div>实例7：45 4 1,10,22 * * /etc/init.d/Apache restart  每月1、10、22日的4 : 45重启Apache</div><div>实例8：10 1 * * 6,0 /etc/init.d/Apache restart   每周六、周日的1 : 10重启Apache</div><div>实例9：0,30 18-23 * * * /etc/init.d/Apache restart     每天18 : 00至23 : 00之间每隔30分钟重启Apache</div><div>实例10：0 23 * * 6 /etc/init.d/Apache restart     每星期六的晚上11 : 00 pm重启Apache</div><div>实例11：* */1 * * * /etc/init.d/Apache restart         每一小时重启Apache</div><div>实例12：* 23-7/1 * * * /etc/init.d/Apache restart       晚上11点到早上7点之间，每隔一小时重启Apache</div><div><br/></div></div></div></div></div></span>
</div></body></html> 