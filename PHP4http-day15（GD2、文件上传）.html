<html>
<head>
  <title>PHP4http-day15（GD2、文件上传）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1445"/>
<h1>PHP4http-day15（GD2、文件上传）</h1>

<div>
<span><div><span style="font-size: 21px;"><b>PHP4http-day15（GD2、文件上传）</b></span></div><div><b><span style="font-size: 19px;">一、GD2</span></b></div><div style="margin-left:40px;"><b>1、开启GD2----------extension=php_gd2.dll</b></div><div align="justify" style="margin-left:40px;"><span style="font-size: 16px;"><b><font color="#010101" face="宋体"><b>2、创建图像的大致步骤</b></font></b></span></div><div align="justify" style="margin-left:40px;"><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">第一步：创建一个画布。</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">第二步：绘制图像：分配调色、画矩形、画圆、写入文字等。</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">第三步：输出图像，可以在浏览器中输出，也可以保存成图像文件。</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">第四步：释放资源。</span></font></div></li></ul></div><div align="justify" style="margin-left: 40px;"><span style="font-size: 16px;"><b><font color="#010101" face="宋体"><b>3、画布坐标系说明：Y轴向下</b></font></b></span></div><div align="justify"><span style="font-size: 19px;"><b><b><font color="#010101" face="宋体">1创建图像画布和空画布</font></b></b></span></div><div align="justify" style="margin-left:40px;"><span style="font-size: 19px;"><b><b><font color="#010101" face="宋体">1.1创建画布</font><font color="#010101" face="Times New Roman">(</font></b><b><font color="#010101" face="宋体">基于现有图像创建</font><font color="#010101" face="Times New Roman">)</font></b></b></span></div><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">描述：由文件或</span></font> <font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">URL</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">创建一个新图象，</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">返回：执行成功返回</span></font><font color="#0000FF" face="宋体" size="2"><span style="font-size:10pt">资源</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">(</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">画布</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">)</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，执行失败返回</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">FALSE</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">。</span></font></div><div style="margin-left:40px;"><b>resource imagecreatefromjpeg ( string $filename )</b>;，与imagecreatefromgif( ) 、imagecreatefrompng( )语法一模一样</div><div align="justify" style="margin-left:40px;"><div align="justify" style="min-height: 18pt;"><div><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>1.2</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>创建</b></span></font><font color="#FF0000" face="宋体" size="4"><span style="font-size:14pt"><b>真彩色</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>空画布：</b></span></font><font color="#010101" face="宋体" size="2" style="color: rgb(1, 1, 1); text-indent: 0pt;"><span style="font-size: 10pt; font-family: ����;">新建一个真彩色图像，是</span></font><font color="#010101" face="Times New Roman" size="2" style="color: rgb(1, 1, 1); text-indent: 0pt;"><span style="font-size:10pt">24</span></font><font color="#010101" face="宋体" size="2" style="color: rgb(1, 1, 1); text-indent: 0pt;"><span style="font-size:10pt">位颜色，</span></font><font color="#010101" face="Times New Roman" size="2" style="color: rgb(1, 1, 1); text-indent: 0pt;"><span style="font-size:10pt">1677</span></font><font color="#010101" face="宋体" size="2" style="color: rgb(1, 1, 1); text-indent: 0pt;"><span style="font-size:10pt">万种颜色。如：</span></font><font color="#010101" face="Times New Roman" size="2" style="color: rgb(1, 1, 1); text-indent: 0pt;"><span style="font-size:10pt">RGB(255,0,0)</span></font></div></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 10pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">resource imagecreatetruecolor ( int $width , int $height )</span></font></b></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="justify" style="min-height: 13pt;"><div align="justify" style="min-height: 14pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">提示：分配的第</span></font><font color="#FF0000" face="Times New Roman" size="2"><span style="font-size:10pt">1</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">个颜色，不能用于真彩色画布的背景。</span></font></div></div></li></ul></div><div align="justify"><div align="justify" style="min-height: 18pt;"><div style="margin-left:40px;"><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>1.3</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>创建基于</b></span></font><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>windows</b></span></font><font color="#FF0000" face="宋体" size="4"><span style="font-size:14pt"><b>调色板</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>的空画布</b></span></font></div><div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="display:inline;list-style:none;"><ul><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><font color="#0000FF" face="Times New Roman" size="2"><span style="font-size:10pt">resource imagecreate ( int $x_size , int $y_size )</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="justify" style="min-height: 14pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">提示：分配的第</span></font><font color="#FF0000" face="Times New Roman" size="2"><span style="font-size:10pt">1</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">个颜色，直接用于画布背景。</span></font></div></li></ul></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">$filename=&quot;./images/01.jpg&quot;;     $img=imagecreatefromjpeg($filename);</span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">#var_dump($img);//resource(3) of type (gd)</span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">header('Content-type:image/jpeg');//告诉浏览器以图片形式打开</span></span></div><div style="margin-left:40px;"><span style="font-size: 12px;"><span style="color: rgb(51, 51, 51);">imagejpeg($img);</span></span></div></div></div></div></div><div><b><span style="font-size: 19px;"><font color="#010101"><b>2、销毁图像：释放资源、释放内存</b></font></span></b></div><div align="justify"><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="display:inline;list-style:none;"><ul><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><font color="#0000FF" face="Times New Roman" size="2"><span style="font-size:10pt">bool imagedestroy ( resource $image )，</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">返回一个布尔值。</span></font></div></li></ul></li></ul></div><div><b><span style="font-size: 19px;"><b>3、为图像分配颜色</b><b>(</b><b>调色</b><b>)</b></span></b></div><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">参数：</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt; font-family:Times New Roman; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">$image</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">是画布。</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">颜色：可以用</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">10</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">进制或</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">16</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">进制表示每一位取值</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，如：红色：</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">(255,0,0)，</span></font><span style="font-size:10pt"><font color="#010101" face="宋体" size="2">红色：</font><span style="font-size:10pt"><font color="#010101" face="Times New Roman" size="2">(0xFF,0x00,0x00)</font></span></span></div><div align="left" style="min-height: 12pt;"><div style="margin-left:40px;"><font color="#010101" face="����"><span style="font-size:11pt">$alpha为透明度，范围是0-127， 127为全透明。</span></font></div><div align="left" style="min-height: 12pt;"><div><b><font size="2"><span style="font-size:10pt">    <span style="font-size: 16px;">  3.1</span></span></font></b><span style="font-size: 16px;"><font color="#010101" face="����">分配普通颜色</font></span> <b><font size="2"><span style="font-size:10pt"><span style="font-size: 16px;">int imagecolorallocate</span></span></font></b></div></div></div><div align="justify"><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="display:inline;list-style:none;"><ul><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">int imagecolorallocate ( resource $image , int $red , int $green , int $blue )；</span></font></b></div></li></ul></li></ul><div style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="left" style="min-height: 12pt;"><div><span style="font-size: 16px;"><font color="#010101"><b>3.2</b>为一幅图像分配颜色和透明度</font></span> <span style="font-size: 16px;"><font color="#010101">imagecolorallocatealpha</font></span></div></div><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">int imagecolorallocatealpha ( resource $image , int $red , int $green , int $blue , int $alpha )；</span></font></b></div></div></div><div align="justify"><b><span style="font-size: 19px;"><font color="#010101">4、区域填充颜色</font></span></b></div><div align="justify"><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="display:inline;list-style:none;"><ul><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">描述：区域填充</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">(</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">封闭的空间</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">)</span></font><font color="#010101" size="2"><span style="font-size:10pt"><span style="font-family: 宋体;">，如：矩形、圆、多边形等。</span><b>imagefill($img,0,0,$reD);<span style="font-family: 宋体;"><i>//给真彩色画布填充</i></span></b><span style="font-family: 宋体;">颜色</span></span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 10pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">bool imagefill ( resource $image , int $x , int $y , int $color )</span></font></b></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">参数：、</span></font><font color="#010101" face="Times New Roman" size="2" style="text-indent: 0pt;"><span style="font-size: 10pt;">$x</span></font><font color="#010101" face="宋体" size="2" style="text-indent: 0pt;"><span style="font-size:10pt">、</span></font><font color="#010101" face="Times New Roman" size="2" style="text-indent: 0pt;"><span style="font-size:10pt">$y</span></font><font color="#010101" face="宋体" size="2" style="text-indent: 0pt;"><span style="font-size:10pt">填充的起点坐标。画布坐标只要不超出画布大小都可。</span></font></div></li></ul></li></ul></div><div align="justify" style="font-weight: bold;"><span style="font-size: 19px;"><font color="#010101"><b>5、输出图像</b></font></span></div><div align="justify"><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="display:inline;list-style:none;"><ul><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">描述：输出图象到浏览器或文件，两者区别1是否屏蔽浏览器输出图像格式声明header('Content-type:image/jpeg');2imagejpeg第二参数有没有</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 10pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">bool image</span></font><font size="2"><span style="font-size:10pt">jpeg</span></font> <font size="2"><span style="font-size:10pt">( resource $image [, string $filename [, int $quality ]] );</span></font></b></div></li></ul></li></ul></div><div align="justify" style="margin-left:40px;">提示：imagegif()、imagepng()语法类似，但只有imagejpeg()才有第3个参数。想用第3个参数，则$filename用null代替。</div><div align="justify"><span style="font-size: 19px;"><b><font color="#010101"><b>6、水平画一行字符串--例</b></font></b></span><span style="color: rgb(1, 1, 1);"> $font=5;      </span><span style="color: rgb(1, 1, 1);">$str=&quot;hangzhou&quot;;      </span><span style="color: rgb(1, 1, 1);">imagestring($img, $font, 50, 50, $str, $reD);</span></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><span style="font-family: ����;">         </span> <span style="font-size: 16px;">语法：</span></span></font><span style="font-size: 16px;"><b>bool imagestring ( resource $image , int $font , int $x , int $y , string $s , int $col )；</b></span></div><div align="justify"><div align="justify" style="min-height: 13pt;"><div><b><span style="font-size: 19px;"><b>7、在图像上写入一行</b><b>TTF</b><b>字体的文本</b></span></b></div><div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 10pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">array imagettftext ( resource $image,float $size,float $angle,int $x,int $y,int $color,string $fontfile,string $text )</span></font></b></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $filename=&quot;./images/a.png&quot;;      //图片上加元宵节快乐</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $img=imagecreatefrompng($filename);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    // var_dump($img);//resource(3) of type (gd)</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $color = imagecolorallocate($img, 255, 0, 0);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $font=50;</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $fontWidth=imagefontwidth($font);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $fontHeight=imagefontwidth($font);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $str='元宵节快乐';</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $c=$fontWidth*strlen($str);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $x=(imagesx($img)-$c-100)*0.5;</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    $y=(imagesy($img)-$fontHeight)*0.5;</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    imagettftext($img, $font, 25, $x, $y, $color, './images/STXINGKA.ttf', $str);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    imagepng($img,&quot;./b.png&quot;);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    header('Content-type:image/jpeg');//告诉浏览器以图片形式打开</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    imagejpeg($img);</span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    imagedestroy($img);</span></span></div></div></div><div><span style="font-size: 19px;"><b><span style="color: rgb(1, 1, 1);">8、获取图像相关信息</span></b></span></div><div><font color="#010101" size="2"><span style="font-size:10pt"><span style="font-family: 宋体;">     </span>8.1取得画布宽度和高度</span></font><b><font size="2"><span style="font-size:10pt">int image<span style="color: rgb(255, 0, 0);">sx</span> ( resource $image )</span></font><font size="2"><span style="font-size:10pt"> </span></font> <font size="2"><span style="font-size:10pt">或</span></font><font size="2"><span style="font-size:10pt"> </span></font> <font size="2"><span style="font-size:10pt">int imagesy( resource $image )5，6，7，8，9</span></font></b></div><div><font color="#010101" size="2"><span style="font-size: 10pt; color: rgb(1, 1, 1); font-weight: normal; font-style: normal;"><span style="font-family: ����;">       </span> 8.2取得字体宽度和高度</span></font><b><font size="2"><span style="font-size:10pt">int image<span style="color: rgb(255, 0, 0);">fontwidth</span>( int $font ) </span></font> <font size="2"><span style="font-size:10pt">或</span></font></b><font size="2"><span style="font-size:10pt"><b>  int imagefontheight( int $font )</b><span style="font-family: 'Times New Roman';"><span style="color: rgb(0, 0, 255);">其中</span></span></span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">$font</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">就是</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">1-5</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">号字。8,13,13,16,15</span></font></div><div><span style="color: rgb(1, 1, 1);">         8.3</span><font color="#010101"><span style="font-size:11pt">取得图像相关信息</span></font><font color="#010101"><span style="font-size:11pt">getimagesize<span style="font-family: ����;">：</span></span></font><font color="#010101" face="����"><span style="font-size:11pt">语法：array getimagesize ( string $filename )</span></font></div><div>          返回值Array([0] =&gt; 1024宽px    [1] =&gt; 685高   [2] =&gt; 2……     // 图像类型的标记：1 = GIF，2 = JPG，3 = PNG……</div><div align="justify" style="font-weight: bold; font-size: 15px;"><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>9、重新采样拷贝部分图像并调整大小</b></span></font></div><div>          语法：<b>bool imagecopyresampled ( resource $dst_image , resource $src_image , int $dst_x , int $dst_y , int $src_x , int $src_y ,</b><b> int $dst_w , int $dst_h , int $src_w , int $src_h );目标图像，原图像</b></div><div align="justify" style="min-height: 13pt;"><div><span style="font-size: 19px;"><b><font color="#010101">10、随机验证码</font></b></span></div></div><div style="margin-left:40px;">$arr=range('A','z'); shuffle($arr);打乱排序 echo mt_rand(0,2);随机   array_rand() $arr=array_merge($arr1,$arr2);合并</div><div style="margin-left:40px;"><b><span style="color: rgb(1, 1, 1);">画直线imageline(image, x1, y1, x2, y2, color);</span></b></div></div></div><div align="justify" style="margin-left:40px;"><b><span style="color: rgb(1, 1, 1);">画曲线imagearc(image, cx, cy, width, height, start, end, color);</span></b></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">          //实现图像的等比缩放</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            function getImagecopyresampled($fileName, $dst_w=100, $dst_h=false){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $imgFun = array('', 'gif', 'jpeg', 'png');                        </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $imageInfo = <b>getimagesize(</b>$fileName<b>)</b>;// 获取旧图像的宽高</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $src_w = $imageInfo[0];                       </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $src_h = $imageInfo[1]; // 旧图像高度                        </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        if(!$dst_h) $dst_h = $src_h/$src_w*$dst_w;// 新图像高度，如果$dst_h没有被赋值，则按照$dst_w进行等比缩放                        </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $funName = 'imagecreatefrom'.$imgFun[$imageInfo[2]];// 基于旧图像创建画布</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $src_image = $funName($fileName);// 生成对应的函数名                       </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $dst_image = imagecreatetruecolor($dst_w, $dst_h); // 创建目标图像</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        imagecopyresampled($dst_image, $src_image, 0, 0, 0, 0, $dst_w, $dst_h, $src_w, $src_h);                        </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $tmpName = explode('/', $fileName);// 将旧图像的路径按照/分解                        </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $newName = array_pop($tmpName);// 弹出图像的名称并赋值给$newName                        </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $newName = $dst_w.'_'.$newName;// 给$newName 拼接倍率                       </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        array_push($tmpName, $newName); // 拼接新的路径</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $tmpName = implode('/', $tmpName);                        </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $funName = 'image'.$imgFun[$imageInfo[2]];// 生成对应的函数名                       </span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        $funName($dst_image, $tmpName, 100);// 保存新图像</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        imagedestroy($dst_image);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        imagedestroy($src_image);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">                        return $tmpName;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">            }</span></span></span></div></div><div><b><span style="font-size: 19px;">二、上传文件原理</span></b></div><div align="justify"><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">上传文件是通过表单来上传的。</span></font></div></div></div><div style="margin-left:40px;"><b><span style="font-size: 16px;"><b>超全局数组</b><b>$_FILES</b></span></b></div><div align="justify"><div align="justify" style="min-height: 14pt;"><div style="font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin-left:80px;">Array</div><div style="margin-left:80px;">(    [img] =&gt; Array</div><div style="margin-left:80px;">        (   [name] =&gt; img01.jpg</div><div style="margin-left:80px;">            [type] =&gt; image/jpeg     //<font color="#010101" face="宋体" size="2"><span style="font-size:10pt">上传文件的</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">MIME</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">类型，易被伪造；</span></font></div><div style="margin-left:80px;">            [tmp_name]=&gt; C:\Windows\Temp\php7583.tmp     //<font color="#010101" face="宋体" size="2"><span style="font-size:10pt">上传到服务器的临时二进制</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">文件</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">数据</span></font></div><div style="margin-left:80px;">            [error]=&gt; 0                    //<font color="#010101" face="宋体" size="2"><span style="font-size:10pt">上传文件的错误编号。</span></font></div><div style="margin-left:80px;">            [size]=&gt; 93634</div><div style="margin-left:80px;">        )</div><div style="margin-left:80px;">)</div></div><div style="margin-left:40px;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">上传文件的信息和数据，都保存在</span></font><font color="#0000FF" face="Times New Roman" size="2"><span style="font-size:10pt">$_FILES</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">全局数组中，不在</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">$_POST</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">中。</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">$_POST</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">中是普通表单元素的信息。</span></font></div></div></div><div align="justify">          <img src="PHP4http-day15（GD2、文件上传）_files/Image.png" type="image/png" style="height:auto;" width="533"/></div><div align="justify"><div align="justify" style="min-height: 18pt;"><div><span style="font-size: 16px;"><font color="#010101" face="Times New Roman"><b>2</b></font><font color="#010101" face="宋体"><b>、修改上传文件的临时目录upload_tmp_dir=绝对路径</b></font></span></div></div></div><div align="justify"><div align="justify" style="min-height: 18pt;"><div><span style="font-size: 16px;"><font color="#010101" face="Times New Roman"><b>3</b></font><font color="#010101" face="宋体"><b>、判断文件是否是通过</b></font><font color="#010101" face="Times New Roman"><b>HTTP POST</b></font><font color="#010101" face="宋体"><b>上传的</b></font><font color="#010101"><span style="color: rgb(1, 1, 1); font-weight: normal; font-style: normal;">语法：</span></font><b>bool is_uploaded_file ( string $filename )</b></span></div></div></div><div align="justify"><span style="font-size: 16px;"><b><font color="#010101"><b><span style="font-family: 宋体;">4、</span>将上传的文件移动到新位置</b></font></b><font color="#010101"><span style="color: rgb(1, 1, 1); font-weight: normal; font-style: normal;">语法：</span></font><font color="#0000FF">bool move_uploaded_file ( string $filename , string $destination )</font></span></div><div align="justify"><span style="font-size: 16px;"><b><b><font color="#010101">5、生成唯一</font><font color="#010101">ID</font></b><font color="#010101"><b>目标文件名</b></font></b></span></div><div align="justify"><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 10pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">string uniqid ([ string $prefix = &quot;&quot; [, bool $more_entropy = false ]] )前缀或子随机数，</span></font></b></div><div align="justify" style="min-height: 14pt;"><b><font size="2"><span style="font-size:10pt">省略则为13位随机数。例：echo &quot;&lt;br&gt;带后缀：&quot;.unique（&quot;S_&quot;,true）;//S_574ea2066121c6.92922561</span></font></b></div></li></ul></div><div align="justify"><b><span style="font-size: 16px;">6、上传文件大小判断：</span></b></div><div align="justify">     (1)修改php.ini单个文件大小upload_max_filesize=80M</div><div align="justify">     (2)在表单准中使用隐藏域来存储文件最大允许上传的值     提示：要写在&lt;input type='file'&gt;这行前才有效。</div><div align="justify">          例：&lt;input type='hidden' name='max_file_size' value='2*1024*1024'&gt;</div><div align="justify">     (3)在服务器端也要进行大小判断：以防绕过客户端限制上传文件</div><div align="justify">          例：if ($_FILES['uploadFile']['size']&gt;50*1024) {exit(&quot;上传文件不能超过50kb&quot;);}</div><div align="justify"><span style="font-size: 16px;"><b><font color="#010101"><b>7、利用</b></font><font color="#010101">php_fileinfo.dll</font><font color="#010101"><b>对文件</b></font><font color="#010101">MIME</font><font color="#010101"><b>类型进行严格检查</b></font></b></span></div><div align="justify"><div align="justify" style="min-height: 13pt;"><div style="margin-left:40px;"><font color="#0000FF" face="宋体" size="2"><span style="font-size:10pt">通过扩展名来验证文件类型，是很容易被黑客绕过的。</span></font></div></div><div align="justify" style="min-height: 14pt;margin-left:40px;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">可以使用第三方扩展</span></font> <font color="#0000FF" face="Times New Roman" size="2"><span style="font-size:10pt">php_fileinfo.dll</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">来对上传文件进的</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">MIME</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">类型进行检查。</span></font></div></div></div><div align="justify" style="margin-left:40px;"><div align="justify" style="min-height: 18pt;"><div><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>1</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>、开启</b></span></font><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>php_fileinfo.dll</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>---》extension=php_fileinfo.dll</b></span></font></div></div></div><div align="justify" style="margin-left:40px;"><div align="justify" style="min-height: 18pt;"><div><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>2</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>、</b></span></font><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>finfo_open()</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">：创建一个检查</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">MIME</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">类型的资源</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">.</span></font></div></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 10pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">resource finfo_open ([ int $options = FILEINFO_NONE] )</span></font></b></div></li></ul></div><div align="justify"><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="display:inline;list-style:none;"><ul><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">参数：如果是默认参数，则返回含有字符集的</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">MIME</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">类型；如果使用</span></font><font color="#0000FF" face="Times New Roman" size="2"><span style="font-size:10pt">FILEINFO_MIME</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">参数，只返回</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">MIME</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">类型。</span></font></div></li></ul></li></ul><div align="justify" style="min-height: 18pt;margin-left:40px;"><div><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>3</b></span></font><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>、</b></span></font><font color="#010101" face="Times New Roman" size="4"><span style="font-size:14pt"><b>finfo_file()</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">：返回指定文件的信息（字符集、</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">MIME</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">类型）</span></font></div></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="display:inline;list-style:none;"><ul><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt;"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">语法：</span></font><b><font size="2"><span style="font-size:10pt">string finfo_file ( resource $finfo , string $file_name = NULL)</span></font></b></div></li></ul></li></ul></div><div align="justify"><div align="left" style="min-height: 10pt;"><div align="left" style="min-height: 10pt;"><div align="left" style="min-height: 10pt;"><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><span style="font-size: 16px;"><b>上传文件八步骤：</b></span></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><b><span style="color: rgb(255, 0, 0);">第一步：制作HTML 表单</span></b></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">上传方式method 的值必须为 post</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">表单编码格式：如果要上传附件，表单编码格式必须为enctype=&quot;multipart/form-data&quot;</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">MAX_FILE_SIZE 的值用来限制用户上传文件的大小。</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">它可以避免我们在花时间等待上传文件之后才发现该文件太大。</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">1、该值必须设置在file控件之前才会起作用。</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">2、该值必须是一个最终值，不能是个运算式，因为表单数据都是字符串。例如：可以是1024，不可以是512*2</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">表单控件：&lt;input type=&quot;file&quot;&gt;</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><b>第二步：接收上传数据$_FILES</b></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">上传文件应该使用$_FILES来接收，接收到的数据如下：</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">[name]、[type]、[tmp_name]、[error]、[size] =&gt; 上传文件的大小</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><b>第三步：判断系统错误</b></span>（详见上传文件<b>错误代码</b>）</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><b>第四步：处理逻辑需要</b></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">文件<b>类型</b>限制：通过判断上传文件的扩展名，来确定上传文件的类型是否符合要求</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">文件<b>大小</b>限制：通过判断 $_FILES['size' ]的大小，来判断上传文件的大小是否符合要求</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><b>第五步：处理安全需要</b></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">MIME类型检测：我们需要获取文件的真实MIME类型，防止文件是病毒文件</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><b>第六步：生成随机文件名</b></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">我们必须为用户生成一个永不重复的文件名，防止用户之间的上传文件被覆盖</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><b>第七步：拼接文件路径</b></span></span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">拼接完整的路径，以便下一步文件移动。</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">工作中，存储文件夹，一般是以年月日命名，方便我们后续的管理和 维护</span></div><div><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(255, 0, 0);"><b>第八步：移动上传文件</b></span>：<b>move_upload_files()</b></span></div></div></div></div></div></div></span>
</div></body></html> 